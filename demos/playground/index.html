<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Dev - Dermatology Test</title>

    <script src="https://unpkg.com/getlibs"></script>

    <script>
        var mode = "dev";  // "dev" | "build" | "unpkg"
        switch (window.location.origin) {
            case "file://":
                mode = "dev"; // "dev" | "build"
                document.write('<link rel="stylesheet" href="../../packages/common/font-awesome/css/font-awesome.min.css">');
                document.write('<script type="text/javascript" src="../../packages/loader/dist/index.js" charset=\"utf-8\"><' + '/script>');
                break
            default:
                mode = "unpkg";
                document.write('<link rel="stylesheet" href="https://unpkg.com/@hpcc-js/common/font-awesome/css/font-awesome.min.css">');
                document.write('<script type="text/javascript" src="https://unpkg.com/@hpcc-js/loader" charset=\"utf-8\"><' + '/script>');
        }
    </script>

    <script>
        var hpccLoader = window["@hpcc-js/loader"];

        var paths = {
            "test": "tests"
        }

        if (mode === "dev") {
            var require = hpccLoader.dev(paths);
        } else {
            var dermatologyDeps = [];//"d3-array", "d3-collection", "d3-color", "d3-dispatch", "d3-ease", "d3-interpolate", "d3-random", "d3-selection", "d3-timer", "d3-transition"];
            if (mode === "unpkg") {
                dermatologyDeps.forEach(function (item) {
                    paths[item] = ["https://unpkg.com/" + item + "/build/" + item, "https://unpkg.com/" + item + "/dist/" + item];
                });
                var require = hpccLoader.unpkg(true, paths);
            } else {
                dermatologyDeps.forEach(function (item) {
                    paths[item] = ["../../node_modules/" + item + "/build/" + item, "../../node_modules/" + item + "/dist/" + item];
                });
                var require = hpccLoader.cdn("../../packages", false, paths);
            }
        }

        var hpccsystems = {
            require: require
        };
    </script>
    <link href="style/index.css" rel="stylesheet">
</head>

<body onresize="doResize()">
    <!-- Always shows a header, even in smaller screens. -->
    <div id="placeholder">
    </div>
    <select id="fileSelect" class="topcorner" onchange="fileSelectChanged(this.value);">
        <option value="HelloWorld" selected="selected">Hello World</option>
        <option value="Bar">Bar</option>
        <option value="Bubble">Bubble</option>
        <option value="Contour">Contour</option>
        <option value="Column">Column</option>
        <option value="HexBin">HexBin</option>
        <option value="Line">Line</option>
        <option value="Pie">Pie</option>
        <option value="Scatter">Scatter</option>
        <option value="Radar">Radar</option>
        <option value="Step">Step</option>
        <option value="WordCloud">Word Cloud</option>
    </select>
    <script>
        var app = null;
        hpccsystems.require(["lib-umd/index"], function (indexMod) {
            app = new indexMod.App()
                .target("placeholder")
                ;
            doResize();
            fileSelectChanged("HelloWorld");
        });

        function fileSelectChanged(fileName) {
            if (app) {
                app.load(fileName);
            }
        }

        function doResize() {
            let myWidth;
            let myHeight;
            if (typeof (window.innerWidth) === "number") {
                myWidth = window.innerWidth;
                myHeight = window.innerHeight;
            } else {
                if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
                    myWidth = document.documentElement.clientWidth;
                    myHeight = document.documentElement.clientHeight;
                } else {
                    if (document.body && (document.body.clientWidth || document.body.clientHeight)) {
                        myWidth = document.body.clientWidth;
                        myHeight = document.body.clientHeight;
                    }
                }
            }
            if (app && myWidth && myHeight) {
                app
                    .resize({ width: myWidth - 16, height: myHeight - 16 })
                    .render()
                    ;
            }
        };

    </script>
</body>

</html>