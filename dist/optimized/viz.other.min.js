(function(e,t){typeof define=="function"&&define.amd?define("other/Audio.js",["../common/HTMLWidget"],t):e.other_Audio=t(e.common_HTMLWidget)})(this,function(e){function t(){e.call(this),this._class="other_Audio",this._tag="audio",this._source=[],this._sections={}}return t.prototype=Object.create(e.prototype),t.prototype.source=function(e){return arguments.length?(this._source=e,this):this._source},t.prototype.section=function(e,t,n,r){return arguments.length?arguments.length===1?this._sections[e]:(this._sections[e]={label:e,offset:t,beatLength:n,beatCount:r,endOffset:t+r*n},this):this._sections},t.prototype.getType=function(e){switch(e){case"mp3":return"audio/mpeg; codecs='mp3'";case"ogg":return"audio/ogg; codecs='vorbis'"}return""},t.prototype.enter=function(e,t){var n=this;t.on("play",function(e){n.onPlay(e)})},t.prototype.update=function(e,t){var n=this,r=t.selectAll("source").data(this._source,function(e){return e});r.enter().append("source").attr("src",function(e){return e})},t.prototype.createTimer=function(e,t,n){var r=this;d3.timer(function(){return r.onTick(e.label,n,e),!0},n*e.beatLength,t+e.offset)},t.prototype.onTick=function(e,t,n){},t.prototype.onPlay=function(e){var t=Date.now();for(var n in this._sections){var r=this._sections[n];for(var i=0;i<r.beatCount;++i)this.createTimer(r,t,i)}},t.prototype.play=function(e){var t=this;this._element.on("canplaythrough",function(e){t.node().play()}),this.node().load()},t}),function(e,t){typeof define=="function"&&define.amd?define("other/Bag.js",[],t):e.other_Bag=t()}(this,function(){function e(){this.items={}}return e.prototype={clear:function(){for(var e in this.items)this.items[e].element().classed("selected",!1);this.items={}},isEmpty:function(){for(var e in this.items)return!1;return!0},append:function(e){this.items[e._id]=e,e.element().classed("selected",!0)},remove:function(e){this.items[e._id].element().classed("selected",!1),delete this.items[e._id]},isSelected:function(e){return this.items[e._id]},get:function(){var e=[];for(var t in this.items)e.push(this.items[t]);return e},set:function(e){this.clear(),e.forEach(function(e,t){this.append(e)},this)},click:function(e,t){t.ctrlKey?this.items[e._id]?this.remove(e):this.append(e):(this.clear(),this.append(e))}},{Selection:e,Navigation:null}}),function(e,t){typeof define=="function"&&define.amd?define("other/Comms.js",[],t):e.other_ESPUrl=t()}(this,function(){function e(){this._protocol="http:",this._hostname="localhost"}function t(e){this._mappings=e,this._reverseMappings={};for(var t in this._mappings){this._reverseMappings[t]={};for(var n in this._mappings[t])this._reverseMappings[t][this._mappings[t][n]]=n}}function n(){e.call(this),this._proxyMappings={},this._mappings=new t({})}function s(){n.call(this),this._port="8002",this._target="",this._query=""}function o(){n.call(this),this._port="8010",this._wuid="",this._jobname="",this._sequence=null,this._resultName=null,this._resultNameCache={},this._resultNameCacheCount=0}function u(){n.call(this),this._port="8010",this._wuid=null}function a(){n.call(this)}function f(){o.call(this),this._hipieResults={}}function l(){f.call(this)}e.prototype.url=function(e){if(!arguments.length)return this._url;this._url=e;var t=document.createElement("a");t.href=this._url;var n={};if(t.search.length){var r=t.search;r[0]==="?"&&(r=r.substring(1)),r=r.split("&"),r.map(function(e){var t=e.split("=");n[decodeURIComponent(t[0])]=decodeURIComponent(t[1])})}this._protocol=t.protocol,this._hostname=t.hostname,this._port=t.port,this._pathname=t.pathname;while(this._pathname.length&&this._pathname[0]==="/")this._pathname=this._pathname.substring(1);return this._search=t.search,this._params=n,this._hash=t.hash,this._host=t.host,this},e.prototype.protocol=function(e){return arguments.length?(this._protocol=e,this):this._protocol},e.prototype.hostname=function(e){return arguments.length?(this._hostname=e,this):this._hostname},e.prototype.port=function(e){return arguments.length?(this._port=e,this):this._port},e.prototype.pathname=function(e){return arguments.length?(this._pathname=e,this):this._pathname},e.prototype.isWsWorkunits=function(){return this._pathname.toLowerCase().indexOf("wsworkunits")>=0||this._params.Wuid},e.prototype.isWorkunitResult=function(){return this.isWsWorkunits()&&(this._params.Sequence||this._params.ResultName)},e.prototype.isWsEcl=function(){return this._pathname.toLowerCase().indexOf("wsecl")>=0||this._params.QuerySetId&&this._params.Id},e.prototype.isWsWorkunits_GetStats=function(){return this._pathname.toLowerCase().indexOf("wsworkunits/wugetstats")>=0&&this._params.WUID},e.prototype.getUrl=function(e){return e=e||{},(e.protocol?e.protocol:this._protocol)+"//"+(e.hostname?e.hostname:this._hostname)+":"+(e.port?e.port:this._port)+"/"+(e.pathname?e.pathname:this._pathname)},t.prototype.contains=function(e,t){return r(e+"."+t,this._mappings)},t.prototype.mapResult=function(e,t){var n=this._mappings[t];n&&(e[t]=e[t].map(function(e){var t=[];if(n.x&&n.x instanceof Array){t=[];for(var r=0;r<n.x.length;++r)t.push(e[n.y[r]])}else for(var i in n)n[i]==="label"?t[0]=e[i]:n[i]==="weight"&&(t[1]=e[i]);return t},this))},t.prototype.mapResponse=function(e){for(var t in e)this.mapResult(e,t)},n.prototype=Object.create(e.prototype);var r=function(e,t){var n=e.split("."),r=t;for(var i=0;i<n.length;++i){var s=n[i];if(r[s]===undefined)return!1;r=r[s]}return!0},i=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};return n.prototype.jsonp=function(t,n,r){for(var s in this._proxyMappings){var o=t.split(s),u=o[0];if(o.length>1){var a=(new e).url(t);t=u+this._proxyMappings[s],n.IP=a._hostname,n.PORT=a._port,o.length>0&&(n.PATH=o[1]);break}}var f=this,l="jsonp_callback_"+Math.round(Math.random()*999999);window[l]=function(e){delete window[l],document.body.removeChild(c),r(e)};var c=document.createElement("script");c.src=t+(t.indexOf("?")>=0?"&":"?")+"jsonp="+l+"&"+i(n),document.body.appendChild(c)},n.prototype.mappings=function(e){return arguments.length?(this._mappings=new t(e),this):this._mappings},n.prototype.proxyMappings=function(e){return arguments.length?(this._proxyMappings=e,this):this._proxyMappings},s.prototype=Object.create(n.prototype),s.prototype.url=function(e){var t=n.prototype.url.apply(this,arguments);if(arguments.length){this._port=this._port==="8010"?"8002":this._port;for(var r in this._params)switch(r){case"QuerySetId":this.target(this._params[r]);break;case"Id":this.query(this._params[r])}if(!this._target&&!this._query){var i=this._pathname.split("/res/");if(i.length>=2){var s=i[1].split("/");s.length>=3&&(this.target(s[1]),this.query(s[2]))}}}return t},s.prototype.target=function(e){return arguments.length?(this._target=e,this):this._target},s.prototype.query=function(e){return arguments.length?(this._query=e,this):this._query},s.prototype.constructUrl=function(){return n.prototype.getUrl.call(this,{pathname:"WsEcl/submit/query/"+this._target+"/"+this._query+"/json"})},s.prototype.call=function(e,t,n){e=e||{},e.target=e.target||this._target,e.query=e.query||this._query;var r=this,i=this.getUrl({pathname:"WsEcl/submit/query/"+e.target+"/"+e.query+"/json"});this.jsonp(i,t,function(e){for(var t in e){e=e[t].Results;break}for(var t in e)e[t]=e[t].Row;r._mappings.mapResponse(e),n(e)})},s.prototype.send=function(e,t){this.call({target:this._target,query:this._query},e,t)},o.prototype=Object.create(n.prototype),o.prototype.url=function(e){var t=n.prototype.url.apply(this,arguments);if(arguments.length){for(var r in this._params)switch(r){case"Wuid":this.wuid(this._params[r]);break;case"ResultName":this.resultName(this._params[r]);break;case"Sequence":this.sequence(this._params[r])}if(!this._wuid){var i=this._url.split("/res/");if(i.length>=2){var s=i[1].split("/");this.wuid(s[0])}}}return t},o.prototype.wuid=function(e){return arguments.length?(this._wuid=e,this):this._wuid},o.prototype.jobname=function(e){return arguments.length?(this._jobname=e,this):this._jobname},o.prototype.sequence=function(e){return arguments.length?(this._sequence=e,this):this._sequence},o.prototype.resultName=function(e){return arguments.length?(this._resultName=e,this):this._resultName},o.prototype.appendParam=function(e,t,n){return t?(n&&(n+="&"),n+e+"="+t):n},o.prototype.constructUrl=function(){var e=n.prototype.getUrl.call(this,{pathname:"WsWorkunits/res/"+this._wuid+"/"}),t="";return t=this.appendParam("ResultName",this._resultName,t),e+(t?"?"+t:"")},o.prototype._fetchResult=function(e,t,n){e=e||{},e._start=e._start||0,e._count=e._count||-1;var r=this.getUrl({pathname:"WsWorkunits/WUResult.json"}),i={Wuid:e.wuid,ResultName:e.resultname,SuppressXmlSchema:!0,Start:e._start,Count:e._count};this._resultNameCache[e.resultname]={};var s=this;this.jsonp(r,i,function(r){for(var i in r){if(!r[i].Result)throw"No result found.";s._total=r[i].Total,r=r[i].Result;for(var i in r){r=r[i].Row;break}break}s._resultNameCache[e.resultname]=r,n||s._mappings.mapResult(s._resultNameCache,e.resultname),t(s._resultNameCache[e.resultname])})},o.prototype.fetchResult=function(e,t,n){if(e.wuid)this._fetchResult(e,t,n);else if(e.jobname){var r=this;this.WUQuery(e,function(i){e.wuid=i[0].Wuid,r._fetchResult(e,t,n)})}},o.prototype.WUQuery=function(e,t){var n=this.getUrl({pathname:"WsWorkunits/WUQuery.json"}),e={Jobname:e.jobname,Count:1};this._resultNameCache={},this._resultNameCacheCount=0;var i=this;this.jsonp(n,e,function(e){if(!r("WUQueryResponse.Workunits.ECLWorkunit",e))throw"No workunit found.";e=e.WUQueryResponse.Workunits.ECLWorkunit,t(e)})},o.prototype.fetchResultNames=function(e){var t=this.getUrl({pathname:"WsWorkunits/WUInfo.json"}),n={Wuid:this._wuid,TruncateEclTo64k:!0,IncludeExceptions:!1,IncludeGraphs:!1,IncludeSourceFiles:!1,IncludeResults:!0,IncludeResultsViewNames:!1,IncludeVariables:!1,IncludeTimers:!1,IncludeResourceURLs:!1,IncludeDebugValues:!1,IncludeApplicationValues:!1,IncludeWorkflows:!1,IncludeXmlSchemas:!1,SuppressResultSchemas:!0};this._resultNameCache={},this._resultNameCacheCount=0;var i=this;this.jsonp(t,n,function(t){r("WUInfoResponse.Workunit.Results.ECLResult",t)&&(t.WUInfoResponse.Workunit.Results.ECLResult.map(function(e){i._resultNameCache[e.Name]=[],++i._resultNameCacheCount}),e(i._resultNameCache))})},o.prototype.fetchResults=function(e,t){var n=this;this.fetchResultNames(function(r){var i=n._resultNameCacheCount;if(i>0)for(var s in n._resultNameCache){var o=n._resultNameCache[s];n.fetchResult({wuid:n._wuid,resultname:s},function(t){--i<=0&&e(n._resultNameCache)},t)}else e(n._resultNameCache)})},o.prototype.postFilter=function(e,t){var n={};for(var r in t)n[r]=t[r].filter(function(t,n){for(var r in e)if(t[r]!==undefined&&e[r]!==undefined&&t[r]!==e[r])return!1;return!0});return this._mappings.mapResponse(n),n},o.prototype.send=function(e,t){var n=this;this._resultNameCacheCount?t(n.postFilter(e,this._resultNameCache)):this.fetchResults(function(r){t(n.postFilter(e,r))},!0)},u.prototype=Object.create(n.prototype),u.prototype.url=function(e){var t=n.prototype.url.apply(this,arguments);if(arguments.length)for(var r in this._params)switch(r){case"WUID":this.wuid(this._params[r])}return t},u.prototype.wuid=function(e){return arguments.length?(this._wuid=e,this):this._wuid},u.prototype.constructUrl=function(){return n.prototype.getUrl.call(this,{pathname:"WsWorkunits/WUGetStats?WUID="+this._wuid})},u.prototype.send=function(e,t){var n=this,i=this.getUrl({pathname:"WsWorkunits/WUGetStats.json?WUID="+this._wuid});this.jsonp(i,e,function(e){r("WUGetStatsResponse.Statistics.WUStatisticItem",e)?t(e.WUGetStatsResponse.Statistics.WUStatisticItem):t([])})},a.prototype=Object.create(n.prototype),a.prototype.fetchResults=function(e,t){var n=this.getUrl({});this._resultNameCache={},this._resultNameCacheCount=0;var r=this;this.jsonp(n,e,function(e){for(var n in e){e=e[n].Results;break}for(var n in e)r._resultNameCache[n]=e[n].Row,++r._resultNameCacheCount;t(r._resultNameCache)})},a.prototype.fetchResult=function(e,t){t(this._resultNameCache[e])},a.prototype.call=function(e,t){var n=this;this.fetchResults(e,t)},f.prototype=Object.create(o.prototype),f.prototype.hipieResults=function(e){if(!arguments.length)return this._hipieResults;this._hipieResultsLength=0,this._hipieResults={};var t=this;return e.forEach(function(e){t._hipieResultsLength++,t._hipieResults[e.id]=e}),this},f.prototype.fetchResults=function(e){var t=this;return o.prototype.fetchResultNames.call(this,function(n){var r=t._hipieResultsLength;if(r>0)for(var i in t._hipieResults){var s=t._hipieResults[i];t.fetchResult(s.from,function(n){--r<=0&&e(t._resultNameCache)})}else e(t._resultNameCache)})},f.prototype.fetchResult=function(e,t){var n=this;return o.prototype.fetchResult.call(this,{wuid:this._wuid,resultname:e},function(e){t(e)})},f.prototype.call=function(e,t){var n=this;if(e.refresh||!this._resultNameCache||!this._resultNameCacheCount)this.fetchResults(t);else{var r={};for(var i in e)e[i]&&e[i+"_changed"]&&(r[i]=e[i]);var s={};for(var i in this._hipieResults){var o=this._hipieResults[i],u=!0;for(var a in r)if(o.filter.indexOf(a)<0){u=!1;break}u&&(s[o.from]=this._resultNameCache[o.from].filter(function(e){for(var t in r)if(e[t]!==r[t])return!1;return!0}))}t(s)}},l.prototype=Object.create(f.prototype),l.prototype.databomb=function(e){return arguments.length?(this._databomb=e,this):this._databomb},l.prototype.fetchResults=function(e){var t=this;setTimeout(function(){t._resultNameCacheCount=0,t._resultNameCache=t._databomb;for(var n in t._databomb)t._resultNameCacheCount++;e(t._resultNameCache)},0)},{ESPMappings:t,ESPUrl:e,WsECL:s,WsWorkunits:o,HIPIERoxie:a,HIPIEWorkunit:f,HIPIEDatabomb:l,createESPConnection:function(t){t=t||document.URL;var n=(new e).url(t);return n.isWsWorkunits_GetStats()?(new u).url(t):n.isWsWorkunits()?(new o).url(t):n.isWsEcl()?(new s).url(t):null}}}),function(e,t){typeof define=="function"&&define.amd?define("other/ISlider",[],t):e.other_ISlider=t()}(this,function(){function e(){}return e.prototype._range={low:0,high:100},e.prototype._step=1,e.prototype._allowRange=!1,e.prototype.click=function(e){console.log("click:  "+e)},e.prototype.newSelection=function(e,t){console.log("newSelection:  "+e+", "+t)},e}),function(e,t){typeof define=="function"&&define.amd?define("other/IWordCloud",[],t):e.other_IWordCloud=t()}(this,function(){function e(){}return e.prototype.testData=function(){this.columns(["Word","Weight"]);var e=["Myriel","Napoleon","Mlle.Baptistine","Mme.Magloire","CountessdeLo","Geborand","Champtercier","Cravatte","Count","OldMan","Labarre","Valjean","Marguerite","Mme.deR","Isabeau","Gervais","Tholomyes","Listolier","Fameuil","Blacheville","Favourite","Dahlia","Zephine","Fantine","Mme.Thenardier","Thenardier","Cosette","Javert","Fauchelevent","Bamatabois","Perpetue","Simplice","Scaufflaire","Woman1","Judge","Champmathieu","Brevet","Chenildieu","Cochepaille","Pontmercy","Boulatruelle","Eponine","Anzelma","Woman2","MotherInnocent","Gribier","Jondrette","Mme.Burgon","Gavroche","Gillenormand","Magnon","Mlle.Gillenormand","Mme.Pontmercy","Mlle.Vaubois","Lt.Gillenormand","Marius","BaronessT","Mabeuf","Enjolras","Combeferre","Prouvaire","Feuilly","Courfeyrac","Bahorel","Bossuet","Joly","Grantaire","MotherPlutarch","Gueulemer","Babet","Claquesous","Montparnasse","Toussaint","Child1","Child2","Brujon","Mme.Hucheloup"].map(function(e){return[e,10+Math.random()*14]});return this.data(e),this},e.prototype.click=function(e){console.log("Click:  "+e.label)},e}),typeof define=="function"&&define.amd&&define("css",[],function(){return{load:function(e,t,n){n()}}}),function(e,t){typeof define=="function"&&define.amd?define("other/MorphText.js",["../common/SVGWidget","css!./MorphText"],t):e.other_MorphText=t(e.common_SVGWidget)}(this,function(e){function t(){e.call(this),this._class="other_MorphText",this._text="",this._anchor="middle",this._reverse=!1}return t.prototype=Object.create(e.prototype),t.prototype.text=function(e){if(!arguments.length)return this._text;this._text=e;var t={},n=this._text.split("");return this.data(n.map(function(e){var n="_"+e;return t[n]===undefined&&(t[n]=0),t[n]++,{text:e,id:e.charCodeAt(0)+1024*t[n]}})),this},t.prototype.anchor=function(e){return arguments.length?(this._anchor=e,this):this._anchor},t.prototype.fontSize=function(e){return arguments.length?(this._fontSize=e,this):this._fontSize},t.prototype.reverse=function(e){return arguments.length?(this._reverse=e,this):this._reverse},t.prototype.enter=function(e,t){if(!this._fontSize){var n=window.getComputedStyle(e,null);this._fontSize=parseInt(n.fontSize)}this._fontWidth=this._fontSize*32/48,this._textElement=t.append("g")},t.prototype.dateTime=function(){var e=new Date,t=e.getSeconds().toString().length==1?"0"+e.getSeconds():e.getSeconds(),n=e.getMinutes().toString().length==1?"0"+e.getMinutes():e.getMinutes(),r=e.getHours().toString().length==1?"0"+e.getHours():e.getHours(),i=e.getHours()>=12?"pm":"am",s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return o[e.getDay()]+" "+s[e.getMonth()]+" "+e.getDate()+" "+e.getFullYear()+" "+r+":"+n+":"+t+i},t.prototype.update=function(e,t){var n=this,r=this._textElement.selectAll("text").data(this.data(),function(e){return e.id});r.attr("class","update"),this.transition.apply(r).attr("x",function(e,t){return(-n._data.length/2+t)*n._fontWidth+n._fontWidth/2});var i=r.enter().append("text").attr("class","enter").attr("font-size",this._fontSize).attr("dy",".35em").attr("y",(this._reverse?1:-1)*this._fontWidth*2).attr("x",function(e,t){return(-n._data.length/2+t)*n._fontWidth+n._fontWidth/2}).style("fill-opacity",1e-6).style("text-anchor",this._anchor).text(function(e){return e.text});this.transition.apply(i).attr("y",0).style("fill-opacity",1),r.exit().attr("class","exit"),this.transition.apply(r.exit()).attr("y",(this._reverse?-1:1)*this._fontWidth*2).style("fill-opacity",1e-6).remove()},t}),function(e,t){typeof define=="function"&&define.amd?define("other/Persist",["require"],t):e.other_Persist=t(e.common_Widget.prototype.require)}(this,function(e){return{discover:function(e,t){var n=[];for(var r in e)if(r.indexOf("__meta_")>=0){var i=e,s=i[r];if(s.type||t){while(s.type==="proxy")i=i[s.proxy],s=i["__meta_"+s.method];s.id!==e[r].id&&(s=JSON.parse(JSON.stringify(s)),s.id=e[r].id),n.push(s)}}return n},serializeToObject:function(e,t,n){var r={__version:3,__class:e._class,__id:e._id,__properties:{}};t&&t.length?t.forEach.forEach(function(t){e[t.id+"_modified"]()&&(r.__properties[t]=e[t]())}):this.discover(e,!0).forEach(function(t){if(e[t.id+"_modified"]())switch(t.type){case"widget":r.__properties[t.id]=this.serializeToObject(e[t.id](),null,n);break;case"widgetArray":r.__properties[t.id]=[];var i=e[t.id]();i.forEach(function(e,i){r.__properties[t.id].push(this.serializeToObject(e,null,n))},this);break;default:r.__properties[t.id]=e[t.id]()}},this);if(e._class==="marshaller_Graph"){var i=e.data().vertices;i&&(this.__vertices=i.map(function(e){return this.serializeToObject(e,null,n)},this))}return n&&(r.__data={},r.__data.columns=e.columns(),r.__data.data=e.data()),r},serialize:function(e,t,n){return JSON.stringify(this.serializeToObject(e,t,n))},deserialize:function(t,n){var r=this,i="../"+t.__class.split("_").join("/");e([i],function(e){var i=new e;t instanceof String&&(t=JSON.parse(t)),t.__id.indexOf("_w")!==0&&(i._id=t.__id);var s=[],o=0;for(var u in t.__properties)if(i["__meta_"+u])switch(i["__meta_"+u].type){case"widget":++o,r.deserialize(t.__properties[u],function(e){i[u](e),--o});break;case"widgetArray":++o;var a=t.__properties[u],f=[];f.length=a.length;var l=0;a.forEach(function(e,t){++l,r.deserialize(e,function(e){f[t]=e,--l});var n=setInterval(function(){l<=0&&(clearInterval(n),l=undefined,i[u](f),--o)},20)});break;default:i[u](t.__properties[u])}else var c=0;var h=setInterval(function(){if(o<=0){clearInterval(h),o=undefined;if(t.__data)for(var e in t.__data)i[e](t.__data[e]);n(i)}},20)})},create:function(e,t){typeof e=="string"&&(e=JSON.parse(e)),this.deserialize(e,t)},clone:function(e,t){this.create(this.serializeToObject(e,[],!0),t)}}}),function(e,t){typeof define=="function"&&define.amd?define("other/PropertyEditor.js",["../common/Widget","../common/HTMLWidget","./Persist"],t):e.other_PropertyEditor=t(e.Common_Widget,e.common_HTMLWidget,e.other_Persist)}(this,function(e,t,n){function r(){t.call(this),this._class="other_PropertyEditor",this._tag="div",this._columns=["Key","Value"],this._contentEditors=[]}r.prototype=Object.create(t.prototype),r.prototype.publish("show_columns",!1,"boolean","Show Columns"),r.prototype.publish("show_data",!1,"boolean","Show Data");var i=function(e,t,n,r,i){if(!e)return"";var s=e._class.split("_"),o="src/"+s.join("/"),u=s[s.length-1],a=n.split("\n").map(function(e){return e.length?"        "+e:""}).join("\n");return a+=a.length?"\n":"",i+=i.length?"\n":"",'require(["'+o+'"], function('+u+") {\n"+"    var "+t+" = new "+u+"()\n"+'        .target("divID")\n'+a+"        .render("+r.split("\n").join("\n        ")+")\n"+"    ;\n"+i+"});"},s=function(e,t,n){var r=t.split("\n").map(function(e){return e.length?"        "+e:""}).join("\n");return r+=r.length?"\n":"","function(widget) {\n    widget."+e+"\n"+r+"        .render("+n+")\n"+"    ;\n"+"}"},o=function(e,t,r){if(!e)return"";var i=n.discover(e).map(function(t){return e[t.id+"_modified"]()?"."+t.id+"("+JSON.stringify(e[t.id]())+")":""}).filter(function(e){return e!==""}).join("\n");if(t){var s=e.columns();s instanceof Array?s.length&&(i+=i.length?"\n":"",i+=".columns("+JSON.stringify(s)+")"):s&&(i+=i.length?"\n":"",i+=".columns("+JSON.stringify(s)+")")}if(r){var o=e.data();if(o instanceof Array)o.length&&(i+=i.length?"\n":"",i+=".data("+JSON.stringify(o)+")");else if(o){i+=i.length?"\n":"";try{i+=".data("+JSON.stringify(o)+")"}catch(u){i+=".data("+u+")"}}}return i};return r.prototype.getJavaScript=function(e,t,n,r){r=r||"";var u="";return this._data._content&&(u=s("_content",o(this._data._content,t,n),"")),i(this._data,e,o(this._data,t,n),u,r)},r.prototype.getPersistString=function(e){return"var "+e+" = "+JSON.stringify(n.serializeToObject(this._data,null,!1),null,"  ")+";"},r.prototype.onChange=function(e,t){},r.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments),this._parentElement.style("overflow","auto")},r.prototype.update=function(e,i){t.prototype.update.apply(this,arguments);var s=this,o=i.selectAll("#"+this._id+" > table").data(this._data,function(e){return e._id});o.enter().append("table").each(function(e){var t=d3.select(this),n=t.append("thead").append("tr"),r=t.append("tbody"),i=n.selectAll("th").data(s._columns,function(e){return e});i.enter().append("th").text(function(e){return e}),i.exit().remove()}),o.select("tbody").each(function(e){var t=d3.select(this),i=t.selectAll(".tr_"+e._id).data(n.discover(e),function(t){return e._id+"_"+t.id+"_"+t.type}),o=i.enter().append("tr").attr("class","tr_"+e._id).each(function(t){var n=d3.select(this);n.append("td").attr("class","label").text(function(e){return e.id});var i=n.append("td").attr("class","field").each(function(){var n=d3.select(this),i=null;switch(t.type){case"boolean":i=n.append("input").attr("class","input_"+e._id).attr("type","checkbox").on("change",function(){e[t.id](this.checked).render(function(){s.onChange(e,t.id),s.render()})});break;case"number":case"string":i=n.append("input").attr("class","input_"+e._id).on("change",function(){e[t.id](this.value).render(function(e){s.onChange(e,t.id),s.render()})});break;case"html-color":i=n.append("input").attr("class","input_"+e._id).on("change",function(){e[t.id](this.value).render(function(e){s.onChange(e,t.id),s.render()})});if(!s.isIE)try{var o=i,u=n.append("input").attr("type","color").on("change",function(){var e=o.node();e.value=this.value,o.on("change").apply(o.node())});u.node().value=e[t.id]()}catch(a){u.remove()}break;case"set":i=n.append("select").attr("class","input_"+e._id).on("change",function(){e[t.id](this.value).render(function(e){s.onChange(e,t.id),s.render()})}),t.set.forEach(function(e){var t=i.append("option").attr("value",e).text(e)});break;case"array":i=n.append("textarea").attr("class","input_"+e._id).attr("rows","4").attr("cols","25").on("change",function(){e[t.id](JSON.parse(this.value)).render(function(){s.onChange(e,t.id),s.render()})});break;case"widget":case"widgetArray":i=n.append("div").attr("class","input_"+e._id),e["_propertyEditor_"+t.id]=(new r).target(i.node()),e["_propertyEditor_"+t.id].onChange=function(e,t){s.onChange(e,t)};break;default:}})});i.select(".input_"+e._id).each(function(t){var n=d3.select(this);switch(t.type){case"boolean":n.node().checked=e[t.id]();break;case"html-color":n.node().value=e[t.id]();break;case"array":n.node().value=JSON.stringify(e[t.id](),null,"  ");break;case"widget":var r=e[t.id]();e["_propertyEditor_"+t.id].data(r?[r]:[]).render();break;case"widgetArray":e["_propertyEditor_"+t.id].data(e[t.id]()).render();break;case"number":case"string":case"set":default:n.node().value=e[t.id]()}}),i.exit().each(function(e){var t=d3.select(this);console.log("PropertyEditor exit:"+e._class+e._id);switch(e.type){case"widget":e.propertyEditor.target(null);break;case"widgetArray":t.html("")}}).remove();if(this._show_columns){var u=this.tbody.append("tr"),a=u.append("td").text("columns");a=u.append("td");var f=a.append("textarea").attr("rows","4").attr("cols","25").on("change",function(){e.columns(JSON.parse(this.value)).render(function(){s.onChange(e,"columns")})});f.node().value=JSON.stringify(this._data._columns)}if(this._show_columns){var u=this.tbody.append("tr"),a=u.append("td").text("data");a=u.append("td"),f=a.append("textarea").attr("rows","4").attr("cols","25").on("change",function(){e.data(JSON.parse(this.value)).render(function(){s.onChange("data")})});try{f.node().value=JSON.stringify(this._data._data)}catch(l){f.node().value=l}}}),o.exit().each(function(e){}).remove()},r.prototype.exit=function(e,n){t.prototype.exit.apply(this,arguments)},r.prototype.click=function(e){},r}),function(e,t){typeof define=="function"&&define.amd?define("other/Slider.js",["../common/SVGWidget","./ISlider","css!./Slider"],t):e.other_Slider=t(e.common_SVGWidget,e.other_ISlider)}(this,function(e,t){function n(){e.call(this),t.call(this),this._class="other_Slider",this._selectionLabel="",this.xScale=d3.scale.linear().clamp(!0);var n=this;this.brush=d3.svg.brush().x(this.xScale).extent([0,0]).on("brushstart",function(e){n.brushstart(e,this)}).on("brush",function(e){n.brushmove(e,this)}).on("brushend",function(e){n.brushend(e,this)}),this.brush.empty=function(){return!1},this.axis=d3.svg.axis().scale(this.xScale).orient("bottom").tickFormat(function(e){return e}).tickSize(0).tickPadding(12)}return n.prototype=Object.create(e.prototype),n.prototype.implements(t.prototype),n.prototype.publish("allowRange",!1,"boolean","Allow Range Selection"),n.prototype.publish("low",0,"number","Low"),n.prototype.publish("high",100,"number","High"),n.prototype.publish("step",10,"number","Step"),n.prototype.publish("selectionLabel","","string","Selection Label"),n.prototype.testData=function(e){return this.columns("Percent"),this.data(66),this},n.prototype.testData2=function(e){return this.allowRange(!0),this.columns("Percent"),this.data([44,66]),this},n.prototype.data=function(t){var n=e.prototype.data.apply(this,arguments);return arguments.length&&this.brushg&&this.brushg.call(this.brush.extent(this._allowRange?this._data:[this._data,this._data])),n},n.prototype.enter=function(e,t){(this._high-this._low)/this._step<=10&&this.axis.tickValues(d3.merge([d3.range(this._low,this._high,this._step),[this._high]])),this.axisElement=t.append("g").attr("class","x axis"),this.brushg=t.append("g").attr("class","brush").call(this.brush),this.brushg.select(".background").attr("y",-9).attr("height",18),this.brushg.select(".extent").attr("y","-10").attr("height","20"),this.brushg.selectAll(".resize").select("rect").attr("x",function(e){return e==="e"?0:-8}).attr("y","-10").attr("width","8").attr("height","20"),this.handle=this.brushg.selectAll(".resize").append("path").attr("class","handle").attr("transform","translate(0,-27)")},n.prototype.update=function(e,t){var n=this,r=this.width()-50;this.xScale.domain([this._low,this._high]).range([-r/2,r/2]),this.axisElement.call(this.axis);var i=this.xScale.range();this.brushg.select(".background").attr("x",i[0]).attr("width",i[1]-i[0]),this.handle.attr("d",function(e){return n.handlePath(e)});if(this._initHandle===undefined){this._initHandle=!0;var s=[this._low,this._low];if(this._allowRange&&this._data)var s=this._data;else this._data&&(s=[this._data,this._data]);this.brushg.call(this.brush.extent(s))}},n.prototype.brushstart=function(e,t){if(!d3.event||!d3.event.sourceEvent)return;d3.event.sourceEvent.stopPropagation()},n.prototype.brushmove=function(e,t){if(!d3.event||!d3.event.sourceEvent)return;d3.event.sourceEvent.stopPropagation();if(!this._allowRange){var n=this.xScale.invert(d3.mouse(t)[0]);d3.select(t).call(this.brush.extent([n,n]))}},n.prototype.brushend=function(e,t){if(!d3.event||!d3.event.sourceEvent)return;d3.event.sourceEvent.stopPropagation();if(!this._allowRange){var n=this.nearestStep(this.xScale.invert(d3.mouse(t)[0]));d3.select(t).call(this.brush.extent([n,n])),this._data=n;if(this._selectionLabel){var r={};r[this._selectionLabel]=n,this.click(r)}else this.click(n)}else{var i=this.brush.extent();i[0]=this.nearestStep(i[0]),i[1]=this.nearestStep(i[1]),this._data=i,d3.select(t).call(this.brush.extent(i)),this.newSelection(i[0],i[1])}},n.prototype.nearestStep=function(e){return this._low+Math.round((e-this._low)/this._step)*this._step},n.prototype.handlePath=function(e,t){var n=+(e==="e"),r=n?1:-1,i=this._allowRange?.5:0,s=18,o="M"+i*r+","+s+"A6,6 0 0 "+n+" "+6.5*r+","+(s+6)+"V"+(2*s-6)+"A6,6 0 0 "+n+" "+i*r+","+2*s;return this._allowRange?o+="ZM"+2.5*r+","+(s+8)+"V"+(2*s-8)+"M"+4.5*r+","+(s+8)+"V"+(2*s-8):o+="M"+1*r+","+(s+8)+"V"+(2*s-8),o},n}),function(e,t){typeof define=="function"&&define.amd?define("other/Table.js",["../common/HTMLWidget","css!./Table"],t):e.other_Table=t(e.common_HTMLWidget)}(this,function(e){function t(){e.call(this),this._class="other_Table",this._tag="table",this._columns=[]}return t.prototype=Object.create(e.prototype),t.prototype.testData=function(){return this.columns(["Lat","Long","Pin"]).data([[37.665074,-122.384375,"green-dot.png"],[32.69068,-117.17854],[39.709455,-104.969859],[41.244123,-95.96161],[32.68898,-117.19204],[45.78649,-108.5266],[45.79618,-108.535652],[45.77432,-108.49437],[45.777062,-108.549835,"red-dot.png"]]),this},t.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments),this._parentElement.style("overflow","auto"),this.thead=n.append("thead").append("tr"),this.tbody=n.append("tbody")},t.prototype.update=function(t,n){e.prototype.update.apply(this,arguments);var r=this,i=this.thead.selectAll("th").data(this._columns,function(e){return e});i.enter().append("th").text(function(e){return e}),i.exit().remove();var s=this.tbody.selectAll("tr").data(this._data);s.enter().append("tr").on("click",function(e){r.click(r.rowToObj(e))}),s.exit().remove();var o=s.selectAll("td").data(function(e,t){return e});o.enter().append("td"),o.text(function(e){return e instanceof String?e.trim():e}),o.exit().remove()},t.prototype.exit=function(e,t){this.thead.remove(),this.tbody.remove()},t.prototype.click=function(e){},t}),function(e,t){typeof define=="function"&&define.amd?define("other/WordCloud.js",["../common/SVGWidget","./IWordCloud","d3/d3","css!./WordCloud"],t):e.other_WordCloud=t(e.common_SVGWidget,e.other_IWordCloud,e.d3)}(this,function(e,t,n){function r(){e.call(this),t.call(this),this._class="other_WordCloud"}return r.prototype=Object.create(e.prototype),r.prototype.implements(t.prototype),r.prototype.publish("padding",1,"number","Padding"),r.prototype.publish("font","Verdana","string","Font Name"),r.prototype.publish("fontSizeFrom",6,"number","Font Size From"),r.prototype.publish("fontSizeTo",24,"number","Font Size To"),r.prototype.publish("angleFrom",-60,"number","Angle From"),r.prototype.publish("angleTo",60,"number","Angle To"),r.prototype.publish("angleCount",5,"number","Angle Count"),r.prototype.data=function(t){var n=e.prototype.data.apply(this,arguments);return arguments.length&&(this._vizData=t.map(function(e){var t={};for(var n in e)t["__viz_"+n]=e[n];return t})),n},r.prototype.enter=function(e,t){this.cloud=n.layout.cloud().font(this._font).padding(this._padding),this.svg=t.append("g")},r.prototype.update=function(e,t){function u(e,t){var i=n.scale.category20(),o=r.svg.selectAll("text").data(e,function(e){return e.__viz_0?e.__viz_0.toLowerCase():""});o.transition().duration(1e3).attr("transform",function(e){return"translate("+[e.x,e.y]+")rotate("+e.rotate+")"}).style("font-size",function(e){return s(e.__viz_1)+"px"}).style("opacity",1),o.enter().append("text").attr("text-anchor","middle").attr("transform",function(e){return"translate("+[e.x,e.y]+")rotate("+e.rotate+")"}).style("font-size",function(e){return s(e.__viz_1)+"px"}).style("font-family",function(e){return e.font}).style("fill",function(e){return i(e.__viz_0?e.__viz_0.toLowerCase():"")}).text(function(e){return e.__viz_0}).on("click",function(e){r.click({label:e.__viz_0,weight:e.__viz_1})}).style("opacity",1e-6).transition().duration(1e3).style("opacity",1),o.exit().transition().duration(1e3).style("opacity",1e-4).remove();if(t){var u=r.width(),a=r.height(),f=t[1].x-t[0].x,l=t[1].y-t[0].y,c=.9/Math.max(f/u,l/a);r.svg.transition().delay(1e3).duration(750).attr("transform","scale("+c+")")}}var r=this,i=n.extent(this._vizData,function(e){return e.__viz_1}),s=n.scale.log().domain(i).range([this._fontSizeFrom,this._fontSizeTo]),o=n.scale.linear().domain([0,r._angleCount-1]).range([r._angleFrom,r._angleTo]);this.cloud.size([this.width(),this.height()]).words(this._vizData).rotate(function(){return o(~~(Math.random()*r._angleCount))}).fontSize(function(e){return s(e.__viz_1)}).on("end",u).start()},r.prototype.render=function(t){var n=this;return require(["d3-cloud/d3.layout.cloud"],function(r){e.prototype.render.call(n,t)}),this},r});