(function(e,t){typeof define=="function"&&define.amd?define(["../common/HTMLWidget","../chart/MultiChart","../c3/Column","../c3/Line","css!./Surface"],t):e.layout_Surface=t(e.common_HTMLWidget,e.chart_MultiChart,e.c3_Column,e.c3_Line)})(this,function(e,t,n,r){function i(){e.call(this),this._class="layout_Surface",this._tag="div"}return i.prototype=Object.create(e.prototype),i.prototype.publish("title","","string","Title"),i.prototype.publish("widget",null,"widget","Widget"),i.prototype.testData=function(){return this.title("ABC"),this.widget((new i).widget((new t).testData())),this},i.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments)},i.prototype.update=function(t,n){e.prototype.update.apply(this,arguments);var r=n.selectAll(".surfaceTitle").data(this._title?[this._title]:[]);r.enter().insert("h3","div").attr("class","surfaceTitle"),r.text(function(e){return e}),r.exit().remove();var i=n.selectAll("#"+this._id+" > .surfaceWidget").data(this._widget?[this._widget]:[],function(e){return e._id}),s=this;i.enter().append("div").attr("class","surfaceWidget").each(function(e){e.target(this)}),i.each(function(e){var t=s.clientWidth(),r=s.clientHeight();s._title&&(r-=s.calcHeight(n.select("h3")));var i=d3.select(this);r-=s.calcFrameHeight(i),t-=s.calcFrameWidth(i),e.resize({width:t,height:r})}),i.exit().each(function(e){e.target(null)}).remove()},i.prototype.exit=function(t,n){this._widget&&(this._widget=null,this.render()),e.prototype.exit.apply(this,arguments)},i.prototype.render=function(t){var n=this;e.prototype.render.call(this,function(e){n._widget?n._widget.render(function(e){t&&t(e)}):t&&t(e)})},i});