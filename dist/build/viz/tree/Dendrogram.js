(function(e,t){typeof define=="function"&&define.amd?define(["d3/d3","../common/SVGWidget","./ITree","css!./Dendrogram"],t):e.tree_Dendrogram=t(e.d3,e.common_SVGWidget,e.tree_ITree)})(this,function(e,t,n){function r(e){t.call(this),n.call(this),this._class="tree_Dendrogram"}return r.prototype=Object.create(t.prototype),r.prototype.implements(n.prototype),r.prototype.publish("paletteID","default","set","Palette ID",r.prototype._palette.switch()),r.prototype.enter=function(n,r){t.prototype.enter.apply(this,arguments),this.layout=e.layout.cluster(),this.diagonal=e.svg.diagonal().projection(function(e){return[e.y,e.x]}),this.g=r.append("g")},r.prototype.update=function(e,n){var r=this;t.prototype.update.apply(this,arguments),this._palette=this._palette.switch(this._paletteID);var i=this.width()-60;this.layout.size([this.height(),i]),this.g.attr("transform","translate("+ -i/2+","+ -this.height()/2+")");var s=this.layout.nodes(this.data()),o=this.layout.links(s),u=this.g.selectAll(".link").data(o);u.enter().append("path").attr("class","link"),u.attr("d",this.diagonal),u.exit().remove();var s=this.g.selectAll(".node").data(s),a=s.enter().append("g").attr("class","node");a.on("click",function(e){r.click(e)}),a.append("circle"),a.append("text"),s.select("circle").attr("r",4.5).style("fill",function(e){return r._palette(e.label)}).append("title").text(function(e){return e.label}),s.select("text").attr("dx",function(e){return e.children?-8:8}).attr("dy",3),s.attr("transform",function(e){return"translate("+e.y+","+e.x+")"}),s.select("text").style("text-anchor",function(e){return e.children?"end":"start"}).text(function(e){return e.label}),s.exit().remove()},r});