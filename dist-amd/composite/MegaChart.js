!function(t,o){"function"==typeof define&&define.amd?define(["../layout/Border","../chart/MultiChart","../common/Text","../other/Legend","../layout/Toolbar","../form/Select","../form/Button","../common/Utility"],o):t.composite_MegaChart=o(t.layout_Border,t.chart_MultiChart,t.common_Text,t.other_Legend,t.layout_Toolbar,t.form_Select,t.form_Button,t.common_Utility)}(this,function(t,o,e,i,n,s,l,r){function h(){t.call(this),this._tag="div",this._chart=new o;var s=this;this._chart.click=function(){s.click.apply(this,arguments)},this._toolbar=new n,this._valueTitle=new e,this._domainTitle=new e,this._legend=new i}return h.prototype=Object.create(t.prototype),h.prototype.constructor=h,h.prototype._class+=" composite_MegaChart",h.prototype._1DChartTypes=o.prototype._1DChartTypes,h.prototype._2DChartTypes=o.prototype._2DChartTypes,h.prototype._NDChartTypes=o.prototype._NDChartTypes,h.prototype._anyChartTypes=o.prototype._anyChartTypes,h.prototype._allChartTypes=o.prototype._allChartTypes,h.prototype.publishReset(),h.prototype.publishProxy("valueAxisTitle","_valueTitle","text"),h.prototype.publishProxy("domainAxisTitle","_domainTitle","text"),h.prototype.publish("legendPosition","right","set","Position of the Legend widget",["none","top","right","bottom","left"],{tags:["Basic"]}),h.prototype.publishProxy("legendFormat","_legend","rainbowFormat"),h.prototype.publishProxy("legendBins","_legend","rainbowBins"),h.prototype.publish("showToolbar",!0,"boolean","Enable/Disable Toolbar widget",null,{tags:["Basic"]}),h.prototype.publish("showChartSelect",!0,"boolean","Show/Hide the chartType dropdown in the toolbar",null,{tags:["Basic"]}),h.prototype.publish("showCSV",!0,"boolean","Show/Hide CSV button",null,{tags:["Basic"]}),h.prototype.publishProxy("title","_toolbar","title"),h.prototype.publish("titleFontSize",null,"number","Title Font Size (px)",null,{tags:["Advanced"],optional:!0}),h.prototype.publish("titleFontColor",null,"html-color","Title Font Color",null,{tags:["Advanced"],optional:!0}),h.prototype.publish("titleFontFamily",null,"string","Title Font Family",null,{tags:["Advanced"],optional:!0}),h.prototype.publish("titleFontBold",!0,"boolean","Enable Bold Title Font",null,{tags:["Advanced"],optional:!0}),h.prototype.publish("titleBackgroundColor",null,"html-color","Background Color",null,{tags:["Intermediate"],optional:!0}),h.prototype.publishProxy("chartType","_chart","chartType"),h.prototype.publishProxy("chart","_chart","chart"),h.prototype.toolbarWidgets=function(t){return arguments.length?(this._toolbar.widgets(t),this):this._toolbar.widgets()},h.prototype.chartTypeDefaults=function(t){return arguments.length?(this._chart.chartTypeDefaults(t),this):this._chart.chartTypeDefaults()},h.prototype.fields=function(t){return arguments.length?(this._chart.fields(t),this):this._chart.fields()},h.prototype.columns=function(t){return arguments.length?(this._chart.columns(t),this):this._chart.columns()},h.prototype.data=function(t){return arguments.length?(this._chart.data(t),this):this._chart.data()},h.prototype.enter=function(o,e){t.prototype.enter.apply(this,arguments);var i=this;this.topShrinkWrap(!1).topPercentage(0).topSize(30),this._csvButton=(new l).id(this.id()+"_csv").value("CSV"),this._csvButton.click=function(t){r.downloadBlob("CSV",i._chart["export"]("CSV"))},this._chartTypeSelect=(new s).id(this.id()+"_chartType").selectOptions(this._allChartTypes.map(function(t){return[t.id,t.display]})).value(this.chartType()),this._chartTypeSelect.change=function(t){i.chartType(t.value()).render()},this.setContent("center",this._chart),this._legend.fixedSize(!0).targetWidget(this._chart).orientation(-1!==["top","bottom"].indexOf(this.legendPosition())?"horizontal":"vertical"),this._prevLegendPosition=this.legendPosition(),this.valueAxisTitle()&&this.setContent("left",this._valueTitle.rotation(-90)).leftShrinkWrap(!0),this.domainAxisTitle()&&this.setContent("bottom",this._domainTitle).bottomShrinkWrap(!0),"none"!==this.legendPosition()&&this.setContent(this.legendPosition(),this._legend)[this.legendPosition()+"ShrinkWrap"](!0)},h.prototype.update=function(o,e){function n(t,o,e){if(e&&-1===t.indexOf(o))t.push(o);else{var i=t.indexOf(o);!e&&i>=0&&t.slice(i,1)}}this._chartTypeSelect.value(this.chartType());var s=this.toolbarWidgets();n(s,this._csvButton,this.showCSV()),n(s,this._chartTypeSelect,this.showChartSelect()),this.toolbarWidgets(s),this._prevShowToolbar!==this.showToolbar()&&(this.setContent("top",this.showToolbar()?this._toolbar:null),this._prevShowToolbar=this.showToolbar()),this._toolbar.fontSize(this.titleFontSize()).fontColor(this.titleFontColor()).fontFamily(this.titleFontFamily()).fontBold(this.titleFontBold()).backgroundColor(this.titleBackgroundColor()),this._chart.data(this.data()),this._chart.chartType()!==this.chartType()&&this._chart.chartType(this.chartType()),this._prevLegendPosition!==this.legendPosition()&&("none"!==this._prevLegendPosition&&this.clearContent(this._prevLegendPosition),this._prevLegendPosition=this.legendPosition(),"none"!==this.legendPosition()&&(this._legend=(new i).fixedSize(!0).targetWidget(this.getContent("center")),this.setContent(this.legendPosition(),this._legend),this._legend.orientation(-1!==["top","bottom"].indexOf(this.legendPosition())?"horizontal":"vertical"))),this._contentClasses=this.getContentClasses(),this.valueAxisTitle()&&"common_Text"!==this._contentClasses.left&&"left"!==this.legendPosition()&&this.setContent("left",this._valueTitle.rotation(-90)),this.domainAxisTitle()&&"common_Text"!==this._contentClasses.bottom&&"bottom"!==this.legendPosition()&&this.setContent("bottom",this._domainTitle).bottomShrinkWrap(!0),this._legend.dataFamily(this._chart.getChartDataFamily()),t.prototype.update.apply(this,arguments)},h.prototype.exit=function(o,e){t.prototype.exit.apply(this,arguments)},h.prototype.getContentClasses=function(){var t={},o=this.getContent("top"),e=this.getContent("right"),i=this.getContent("bottom"),n=this.getContent("left");return t.top=null!==o?o.classID():void 0,t.right=null!==e?e.classID():void 0,t.bottom=null!==i?i.classID():void 0,t.left=null!==n?n.classID():void 0,t},h.prototype.click=function(t,o,e){console.log("Click:  "+JSON.stringify(t)+", "+o+", "+e)},h});