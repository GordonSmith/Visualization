(function(e,t){typeof define=="function"&&define.amd?define(["./SVGWidget","./Shape","./FAChar","css!./Icon"],t):e.common_Icon=t(e.common_SVGWidget,e.common_Shape,e.common_FAChar)})(this,function(e,t,n){function r(){e.call(this),this._shapeWidget=new t,this._faChar=new n}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype._class+=" common_Icon",r.prototype.publish("shape","circle","set","Shape Type",["circle","square"],{tags:["Private"]}),r.prototype.publishProxy("faChar","_faChar","char"),r.prototype.publish("imageUrl",null,"string","Image URL",null,{optional:!0}),r.prototype.publishProxy("image_colorFill","_faChar","text_colorFill"),r.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),r.prototype.publish("diameter",24,"number","Diameter",null,{tags:["Private"]}),r.prototype.publish("paddingPercent",45,"number","Padding Percent",null,{tags:["Private"]}),r.prototype.publishProxy("shape_colorFill","_shapeWidget","colorFill"),r.prototype.publishProxy("shape_colorStroke","_shapeWidget","colorStroke"),r.prototype.intersection=function(e,t){return this._shapeWidget.intersection(e,t)},r.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments),this._defs=n.append("defs"),this._defs.append("clipPath").attr("id","clip_"+this.id()+"_circle").append("circle").attr("x",0).attr("y",0),this._defs.append("clipPath").attr("id","clip_"+this.id()+"_square").append("rect"),this._root=n.append("g"),this._shapeWidget.target(this._root.node()).render(),this._faChar.target(n.node()).render(),this._tooltipElement=n.append("title");var r=this;n.on("click",function(e){r.click(e)})},r.prototype.click=function(e){console.log("Clicked the icon")},r.prototype.update=function(t,n){e.prototype.update.apply(this,arguments);var r=this.diameter(),i=r/2;this._defs.select("circle").attr("r",i),this._defs.select("rect").attr("x",-i).attr("y",-i).attr("width",r).attr("height",r),this._faChar.fontSize(r*(100-this.paddingPercent())/100).render(),this._shapeWidget.shape(this.shape()).width(r).height(r).render();var s=this._root.selectAll("image").data(this.imageUrl()?[this.imageUrl()]:[],function(e){return e});s.enter().append("image").attr("xlink:href",this.imageUrl()),s.attr("clip-path","url(#clip_"+this.id()+"_"+this.shape()+")").attr("x",-i).attr("y",-i).attr("width",r).attr("height",r),s.exit().remove(),this._tooltipElement.text(this.tooltip())},r.prototype.exit=function(t,n){e.prototype.exit.apply(this,arguments),this._shapeWidget.target(null),this._faChar.target(null)},r});