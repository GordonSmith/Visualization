!function(t,e){"function"==typeof define&&define.amd?define(["./SVGWidget","./Shape","./FAChar","css!./Icon"],e):t.common_Icon=e(t.common_SVGWidget,t.common_Shape,t.common_FAChar)}(this,function(t,e,i){function r(){t.call(this),this._shapeWidget=new e,this._faChar=new i}return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype._class+=" common_Icon",r.prototype.publish("shape","circle","set","Shape Type",["circle","square"],{tags:["Private"]}),r.prototype.publishProxy("faChar","_faChar","char"),r.prototype.publish("imageUrl",null,"string","Image URL",null,{optional:!0}),r.prototype.publishProxy("image_colorFill","_faChar","text_colorFill"),r.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),r.prototype.publish("diameter",24,"number","Diameter",null,{tags:["Private"]}),r.prototype.publish("paddingPercent",45,"number","Padding Percent",null,{tags:["Private"]}),r.prototype.publishProxy("shape_colorFill","_shapeWidget","colorFill"),r.prototype.publishProxy("shape_colorStroke","_shapeWidget","colorStroke"),r.prototype.intersection=function(t,e){return this._shapeWidget.intersection(t,e)},r.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments),this._defs=i.append("defs"),this._defs.append("clipPath").attr("id","clip_"+this.id()+"_circle").append("circle").attr("x",0).attr("y",0),this._defs.append("clipPath").attr("id","clip_"+this.id()+"_square").append("rect"),this._root=i.append("g"),this._shapeWidget.target(this._root.node()).render(),this._faChar.target(i.node()).render(),this._tooltipElement=i.append("title");var r=this;i.on("click",function(t){r.click(t)})},r.prototype.click=function(t){console.log("Clicked the icon")},r.prototype.update=function(e,i){t.prototype.update.apply(this,arguments);var r=this.diameter(),o=r/2;this._defs.select("circle").attr("r",o),this._defs.select("rect").attr("x",-o).attr("y",-o).attr("width",r).attr("height",r),this._faChar.fontSize(r*(100-this.paddingPercent())/100).render(),this._shapeWidget.shape(this.shape()).width(r).height(r).render();var p=this._root.selectAll("image").data(this.imageUrl()?[this.imageUrl()]:[],function(t){return t});p.enter().append("image").attr("xlink:href",this.imageUrl()),p.attr("clip-path","url(#clip_"+this.id()+"_"+this.shape()+")").attr("x",-o).attr("y",-o).attr("width",r).attr("height",r),p.exit().remove(),this._tooltipElement.text(this.tooltip())},r.prototype.exit=function(e,i){t.prototype.exit.apply(this,arguments),this._shapeWidget.target(null),this._faChar.target(null)},r});