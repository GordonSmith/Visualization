(function(e,t){typeof define=="function"&&define.amd?define(["./HTMLWidget"],t):e.common_Image=t(e.common_HTMLWidget)})(this,function(e){function t(){e.call(this),this._drawStartPos="center"}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" common_Image",t.prototype.publish("source",null,"string","Image Source",null,{tags:["Basic"]}),t.prototype.publish("sizing","actual","set","Controls sizing mode",["actual","fit","custom"],{tags:["Basic"]}),t.prototype.publish("customWidth","50%","string","Applies this width to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"],disable:function(e){return e.sizing()!=="custom"}}),t.prototype.publish("customHeight","20%","string","Applies this height to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"],disable:function(e){return e.sizing()!=="custom"}}),t.prototype.publish("lockAspectRatio",!0,"boolean","Locks the aspect ratio when scaling/stretching",null,{tags:["Basic"],disable:function(e){return e.sizing()!=="fit"}}),t.prototype.publish("alignment","center","set","Image Alignment",["center","origin"],{tags:["Basic"]}),t.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments)},t.prototype.update=function(t,n){this._drawStartPos=this.alignment(),e.prototype.update.apply(this,arguments);var r=this,i=n.selectAll("img").data(this.source()?[this.source()]:[],function(e){return e});i.enter().append("img").attr("src",this.source()).on("load",function(e){i.style(r.calcSize())}),i.style(this.calcSize()),i.exit().remove()},t.prototype.calcSize=function(){var e={width:"auto",height:"auto"};switch(this.sizing()){case"fit":if(this.lockAspectRatio()){var t=this.element().select("img");t.style({width:"auto",height:"auto"});var n=t.node().getBoundingClientRect(),r=n.width/this.width(),i=n.height/this.height();r>i?(e.width=this.width()+"px",e.height=n.height/r+"px"):(e.width=n.width/i+"px",e.height=this.height()+"px")}else e.width=this.width()+"px",e.height=this.height()+"px";break;case"custom":e.width=this.customWidth(),e.height=this.customHeight()}return e},t.prototype.exit=function(t,n){e.prototype.exit.apply(this,arguments)},t});