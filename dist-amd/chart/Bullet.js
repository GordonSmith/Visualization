(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","d3-bullet","css!./Bullet"],t):e.chart_Bullet=t(e.d3,e.common_HTMLWidget,e.d3.bullet)})(this,function(e,t,n){function r(e){t.call(this)}return n=n||e.bullet||window.d3.bullet,r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype._class+=" chart_Bullet",r.prototype.publish("titleColumn",null,"set","Title Column",function(){return this.columns()},{optional:!0}),r.prototype.publish("subtitleColumn",null,"set","Subtitle Column",function(){return this.columns()},{optional:!0}),r.prototype.publish("rangesColumn",null,"set","Ranges Column",function(){return this.columns()},{optional:!0}),r.prototype.publish("measuresColumn",null,"set","Measures Column",function(){return this.columns()},{optional:!0}),r.prototype.publish("markersColumn",null,"set","Markers Column",function(){return this.columns()},{optional:!0}),r.prototype.bulletData=function(){function t(t,n){var r=e.indexOf(n);return r>=0?t[r]instanceof Array?t[r]:[t[r]]:[]}var e=this.columns();return this.data().map(function(e){return{title:t(e,this.titleColumn()),subtitle:t(e,this.subtitleColumn()),ranges:t(e,this.rangesColumn()),measures:t(e,this.measuresColumn()),markers:t(e,this.markersColumn())}},this)},r.prototype.enter=function(n,r){t.prototype.enter.apply(this,arguments),e.select(n.parentNode).style("overflow","auto")},r.prototype.update=function(r,i){t.prototype.update.apply(this,arguments);var s={top:8,right:16,bottom:20,left:16},o=this.width()-s.left-s.right,u=50-s.top-s.bottom,a=i.selectAll("svg").data(this.bulletData());a.enter().append("svg").attr("class","bullet").each(function(t){var n=e.select(this),r=n.append("g").attr("class","bulletBar"),i=r.append("g").attr("class","bulletTitle");i.append("text").attr("class","title"),i.append("text").attr("class","subtitle").attr("dy","1em")});var f=a.select(".bulletTitle").style("text-anchor","end").attr("transform","translate(-6,"+u/2+")");f.select(".title").text(function(e){return e.title}),f.select(".subtitle").text(function(e){return e.subtitle});var l=0;f.each(function(){var e=this.getBBox();e.width>l&&(l=e.width)});var c=(new n).width(o-l).height(u);a.attr("width",o).attr("height",u+s.top+s.bottom),a.select(".bulletBar").attr("transform","translate("+(l+s.left)+","+s.top+")").call(c),a.exit().remove()},r.prototype.exit=function(e,n){t.prototype.exit.apply(this,arguments)},r});