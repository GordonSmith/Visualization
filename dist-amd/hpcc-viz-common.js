!function(){function t(t){return t.ranges}function e(t){return t.markers}function i(t){return t.measures}function n(t){var e=t(0);return function(i){return Math.abs(t(i)-e)}}d3.bullet=function(){function o(t){t.each(function(t,e){var i,o,r=c.call(this,t,e).slice().sort(d3.descending),p=f.call(this,t,e).slice().sort(d3.descending),b=d.call(this,t,e).slice().sort(d3.descending),m=d3.select(this),y=m.select("g.wrap");y.empty()&&(y=m.append("g").attr("class","wrap")),s?(i=l,o=h,y.attr("transform","rotate(90)translate(0,"+-h+")")):(i=h,o=l,y.attr("transform",null));var g=d3.scale.linear().domain([0,Math.max(r[0],p[0],b[0])]).range(a?[i,0]:[0,i]),_=this.__chart__||d3.scale.linear().domain([0,1/0]).range(g.range());this.__chart__=g;var x=n(_),v=n(g),w=y.selectAll("rect.range").data(r);w.enter().append("rect").attr("class",function(t,e){return"range s"+e}).attr("width",x).attr("height",o).attr("x",a?_:0),d3.transition(w).attr("x",a?g:0).attr("width",v).attr("height",o);var k=y.selectAll("rect.measure").data(b);k.enter().append("rect").attr("class",function(t,e){return"measure s"+e}).attr("width",x).attr("height",o/3).attr("x",a?_:0).attr("y",o/3),d3.transition(k).attr("width",v).attr("height",o/3).attr("x",a?g:0).attr("y",o/3);var S=y.selectAll("line.marker").data(p);S.enter().append("line").attr("class","marker").attr("x1",_).attr("x2",_).attr("y1",o/6).attr("y2",5*o/6),d3.transition(S).attr("x1",g).attr("x2",g).attr("y1",o/6).attr("y2",5*o/6);var z=m.selectAll("g.axis").data([0]);z.enter().append("g").attr("class","axis"),z.attr("transform",s?null:"translate(0,"+o+")").call(u.scale(g))}),d3.timer.flush()}var r="left",a=!1,s=!1,c=t,f=e,d=i,h=380,l=30,u=d3.svg.axis();return o.orient=function(t){return arguments.length?(r=t+"",a="right"==r||"bottom"==r,u.orient((s="top"==r||"bottom"==r)?"left":"bottom"),o):r},o.ranges=function(t){return arguments.length?(c=t,o):c},o.markers=function(t){return arguments.length?(f=t,o):f},o.measures=function(t){return arguments.length?(d=t,o):d},o.width=function(t){return arguments.length?(h=+t,o):h},o.height=function(t){return arguments.length?(l=+t,o):l},d3.rebind(o,u,"tickFormat")}}(),define("d3-bullet",function(){}),d3.sankey=function(){function t(){u.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),p.forEach(function(t){var e=t.source,i=t.target;"number"==typeof e&&(e=t.source=u[t.source]),"number"==typeof i&&(i=t.target=u[t.target]),e.sourceLinks.push(t),i.targetLinks.push(t)})}function e(){u.forEach(function(t){t.value=Math.max(d3.sum(t.sourceLinks,c),d3.sum(t.targetLinks,c))})}function i(){for(var t,e=u,i=0;e.length;)t=[],e.forEach(function(e){e.x=i,e.dx=d,e.sourceLinks.forEach(function(e){t.indexOf(e.target)<0&&t.push(e.target)})}),e=t,++i;n(i),o((l[0]-d)/(i-1))}function n(t){u.forEach(function(e){e.sourceLinks.length||(e.x=t-1)})}function o(t){u.forEach(function(e){e.x*=t})}function r(t){function e(){var t=d3.min(a,function(t){return(l[1]-(t.length-1)*h)/d3.sum(t,c)});a.forEach(function(e){e.forEach(function(e,i){e.y=i,e.dy=e.value*t})}),p.forEach(function(e){e.dy=e.value*t})}function i(t){function e(t){return s(t.source)*t.value}a.forEach(function(i,n){i.forEach(function(i){if(i.targetLinks.length){var n=d3.sum(i.targetLinks,e)/d3.sum(i.targetLinks,c);i.y+=(n-s(i))*t}})})}function n(t){function e(t){return s(t.target)*t.value}a.slice().reverse().forEach(function(i){i.forEach(function(i){if(i.sourceLinks.length){var n=d3.sum(i.sourceLinks,e)/d3.sum(i.sourceLinks,c);i.y+=(n-s(i))*t}})})}function o(){a.forEach(function(t){var e,i,n,o=0,a=t.length;for(t.sort(r),n=0;a>n;++n)e=t[n],i=o-e.y,i>0&&(e.y+=i),o=e.y+e.dy+h;if(i=o-h-l[1],i>0)for(o=e.y-=i,n=a-2;n>=0;--n)e=t[n],i=e.y+e.dy+h-o,i>0&&(e.y-=i),o=e.y})}function r(t,e){return t.y-e.y}var a=d3.nest().key(function(t){return t.x}).sortKeys(d3.ascending).entries(u).map(function(t){return t.values});e(),o();for(var f=1;t>0;--t)n(f*=.99),o(),i(f),o()}function a(){function t(t,e){return t.source.y-e.source.y}function e(t,e){return t.target.y-e.target.y}u.forEach(function(i){i.sourceLinks.sort(e),i.targetLinks.sort(t)}),u.forEach(function(t){var e=0,i=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=i,i+=t.dy})})}function s(t){return t.y+t.dy/2}function c(t){return t.value}var f={},d=24,h=8,l=[1,1],u=[],p=[];return f.nodeWidth=function(t){return arguments.length?(d=+t,f):d},f.nodePadding=function(t){return arguments.length?(h=+t,f):h},f.nodes=function(t){return arguments.length?(u=t,f):u},f.links=function(t){return arguments.length?(p=t,f):p},f.size=function(t){return arguments.length?(l=t,f):l},f.layout=function(n){return t(),e(),i(),r(n),a(),f},f.relayout=function(){return a(),f},f.link=function(){function t(t){var i=t.source.x+t.source.dx,n=t.target.x,o=d3.interpolateNumber(i,n),r=o(e),a=o(1-e),s=t.source.y+t.sy+t.dy/2,c=t.target.y+t.ty+t.dy/2;return"M"+i+","+s+"C"+r+","+s+" "+a+","+c+" "+n+","+c}var e=.5;return t.curvature=function(i){return arguments.length?(e=+i,t):e},t},f},define("d3-sankey",function(){}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("d3-cloud",[],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e=e.d3||(e.d3={}),e=e.layout||(e.layout={}),e.cloud=t()}}(function(){var t;return function e(t,i,n){function o(a,s){if(!i[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var d=i[a]={exports:{}};t[a][0].call(d.exports,function(e){var i=t[a][1][e];return o(i?i:e)},d,d.exports,e,t,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){function n(t){return t.text}function o(){return"serif"}function r(){return"normal"}function a(t){return Math.sqrt(t.value)}function s(){return 30*(~~(6*Math.random())-3)}function c(){return 1}function f(t,e,i,n){if(!e.sprite){var o=t.context,r=t.ratio;o.clearRect(0,0,(x<<5)/r,v/r);var a=0,s=0,c=0,f=i.length;for(--n;++n<f;){e=i[n],o.save(),o.font=e.style+" "+e.weight+" "+~~((e.size+1)/r)+"px "+e.font;var d=o.measureText(e.text+"m").width*r,h=e.size<<1;if(e.rotate){var l=Math.sin(e.rotate*_),u=Math.cos(e.rotate*_),p=d*u,b=d*l,m=h*u,y=h*l;d=Math.max(Math.abs(p+y),Math.abs(p-y))+31>>5<<5,h=~~Math.max(Math.abs(b+m),Math.abs(b-m))}else d=d+31>>5<<5;if(h>c&&(c=h),a+d>=x<<5&&(a=0,s+=c,c=0),s+h>=v)break;o.translate((a+(d>>1))/r,(s+(h>>1))/r),e.rotate&&o.rotate(e.rotate*_),o.fillText(e.text,0,0),e.padding&&(o.lineWidth=2*e.padding,o.strokeText(e.text,0,0)),o.restore(),e.width=d,e.height=h,e.xoff=a,e.yoff=s,e.x1=d>>1,e.y1=h>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=d}for(var g=o.getImageData(0,0,(x<<5)/r,v/r).data,w=[];--n>=0;)if(e=i[n],e.hasText){for(var d=e.width,k=d>>5,h=e.y1-e.y0,S=0;h*k>S;S++)w[S]=0;if(a=e.xoff,null==a)return;s=e.yoff;for(var z=0,P=-1,M=0;h>M;M++){for(var S=0;d>S;S++){var E=k*M+(S>>5),W=g[(s+M)*(x<<5)+(a+S)<<2]?1<<31-S%32:0;w[E]|=W,z|=W}z?P=M:(e.y0++,h--,M--,s++)}e.y1=e.y0+P,e.sprite=w.slice(0,(e.y1-e.y0)*k)}}}function d(t,e,i){i>>=5;for(var n,o=t.sprite,r=t.width>>5,a=t.x-(r<<4),s=127&a,c=32-s,f=t.y1-t.y0,d=(t.y+t.y0)*i+(a>>5),h=0;f>h;h++){n=0;for(var l=0;r>=l;l++)if((n<<c|(r>l?(n=o[h*r+l])>>>s:0))&e[d+l])return!0;d+=i}return!1}function h(t,e){var i=t[0],n=t[1];e.x+e.x0<i.x&&(i.x=e.x+e.x0),e.y+e.y0<i.y&&(i.y=e.y+e.y0),e.x+e.x1>n.x&&(n.x=e.x+e.x1),e.y+e.y1>n.y&&(n.y=e.y+e.y1)}function l(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function u(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function p(t){var e=4,i=e*t[0]/t[1],n=0,o=0;return function(t){var r=0>t?-1:1;switch(Math.sqrt(1+4*r*t)-r&3){case 0:n+=i;break;case 1:o+=e;break;case 2:n-=i;break;default:o-=e}return[n,o]}}function b(t){for(var e=[],i=-1;++i<t;)e[i]=0;return e}function m(){return document.createElement("canvas")}function y(t){return"function"==typeof t?t:function(){return t}}var g=t("d3-dispatch").dispatch,_=Math.PI/180,x=64,v=2048;e.exports=function(){function t(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(x<<5)/e,t.height=v/e;var i=t.getContext("2d");return i.fillStyle=i.strokeStyle="red",i.textAlign="center",{context:i,ratio:e}}function e(t,e,n){for(var o,r,a,s=([{x:0,y:0},{x:i[0],y:i[1]}],e.x),c=e.y,f=Math.sqrt(i[0]*i[0]+i[1]*i[1]),h=E(i),u=A()<.5?1:-1,p=-u;(o=h(p+=u))&&(r=~~o[0],a=~~o[1],!(Math.min(Math.abs(r),Math.abs(a))>=f));)if(e.x=s+r,e.y=c+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>i[0]||e.y+e.y1>i[1])&&(!n||!d(e,t,i[0]))&&(!n||l(e,n))){for(var b,m=e.sprite,y=e.width>>5,g=i[0]>>5,_=e.x-(y<<4),x=127&_,v=32-x,w=e.y1-e.y0,k=(e.y+e.y0)*g+(_>>5),S=0;w>S;S++){b=0;for(var z=0;y>=z;z++)t[k+z]|=b<<v|(y>z?(b=m[S*y+z])>>>x:0);k+=g}return delete e.sprite,!0}return!1}var i=[256,256],p=n,_=o,k=a,S=r,z=r,P=s,M=c,E=u,W=[],C=1/0,B=g("word","end"),T=null,A=Math.random,O={},D=m;return O.canvas=function(t){return arguments.length?(D=y(t),O):D},O.start=function(){function n(){for(var t=Date.now();Date.now()-t<C&&++c<s&&T;){var n=l[c];n.x=i[0]*(A()+.5)>>1,n.y=i[1]*(A()+.5)>>1,f(o,n,l,c),n.hasText&&e(r,n,a)&&(d.push(n),B.word(n),a?h(a,n):a=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=i[0]>>1,n.y-=i[1]>>1)}c>=s&&(O.stop(),B.end(d,a))}var o=t(D()),r=b((i[0]>>5)*i[1]),a=null,s=W.length,c=-1,d=[],l=W.map(function(t,e){return t.text=p.call(this,t,e),t.font=_.call(this,t,e),t.style=S.call(this,t,e),t.weight=z.call(this,t,e),t.rotate=P.call(this,t,e),t.size=~~k.call(this,t,e),t.padding=M.call(this,t,e),t}).sort(function(t,e){return e.size-t.size});return T&&clearInterval(T),T=setInterval(n,0),n(),O},O.stop=function(){return T&&(clearInterval(T),T=null),O},O.timeInterval=function(t){return arguments.length?(C=null==t?1/0:t,O):C},O.words=function(t){return arguments.length?(W=t,O):W},O.size=function(t){return arguments.length?(i=[+t[0],+t[1]],O):i},O.font=function(t){return arguments.length?(_=y(t),O):_},O.fontStyle=function(t){return arguments.length?(S=y(t),O):S},O.fontWeight=function(t){return arguments.length?(z=y(t),O):z},O.rotate=function(t){return arguments.length?(P=y(t),O):P},O.text=function(t){return arguments.length?(p=y(t),O):p},O.spiral=function(t){return arguments.length?(E=w[t]||t,O):E},O.fontSize=function(t){return arguments.length?(k=y(t),O):k},O.padding=function(t){return arguments.length?(M=y(t),O):M},O.random=function(t){return arguments.length?(A=t,O):A},O.on=function(){var t=B.on.apply(B,arguments);return t===B?O:t},O};var w={archimedean:u,rectangular:p}},{"d3-dispatch":2}],2:[function(e,i,n){!function(e,o){"object"==typeof n&&"undefined"!=typeof i?o(n):"function"==typeof t&&t.amd?t(["exports"],o):o(e.dispatch={})}(this,function(t){"use strict";function e(t){function e(t){var e=(t+="").indexOf("."),i=t;if(e>=0?t=t.slice(0,e):i+=".",t&&!a.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}function i(t){return function(){for(var e,i,n=a[t],o=-1,r=n.length;++o<r;)(i=(e=n[o]).value)&&i.apply(this,arguments);return c}}var n,o=-1,r=t.length,a={},s={},c=this;for(c.on=function(t,i){if(t=e(t),arguments.length<2)return(i=s[t.name])&&i.value;if(t.type){var n,o=a[t.type],r=s[t.name];r&&(r.value=null,n=o.indexOf(r),a[t.type]=o=o.slice(0,n).concat(o.slice(n+1)),delete s[t.name]),i&&(i={value:i},s[t.name]=i,o.push(i))}else if(null==i)for(var f in a)if(i=s[f+t.name]){i.value=null;var o=a[f],n=o.indexOf(i);a[f]=o.slice(0,n).concat(o.slice(n+1)),delete s[i.name]}return c};++o<r;){if(n=t[o]+"",!n||n in c)throw new Error("illegal or duplicate type: "+n);a[n]=[],c[n]=i(n)}}function i(){return new e(arguments)}i.prototype=e.prototype,t.dispatch=i})},{}]},{},[1])(1)}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Class",[],e):t.common_Class=e()}(this,function(){function t(){}return t.prototype.constructor=t,t.prototype._class="common_Class",t.prototype["class"]=function(t){return arguments.length?(this._class=t,this):this._class},t.prototype.classID=function(){return this._class.split(" ").pop()},t.prototype["implements"]=function(t){for(var e in t)t.hasOwnProperty(e)&&(void 0===this[e]?this[e]=t[e]:window.__hpcc_debug&&console.log("Duplicate member:  "+e))},t.prototype.mixin=function(t){this["implements"](t.prototype),t.prototype.hasOwnProperty("_class")&&(this._class+=" "+t.prototype._class.split(" ").pop())},t.prototype.overrideMethod=function(t,e){if(void 0===this[t])throw"Method:  "+t+" does not exist.";var i=this[t];return this[t]=function(){return e(i,arguments)},this},t}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Platform",["d3","es6-promise"],e):(t.require=t.require||function(e,i){"function"==typeof e&&(i=e,e=[]);var n=e.map(function(e){var i=0===e.indexOf("src/")?"src/".length:0===e.indexOf("hpcc-viz/")?"hpcc-viz/".length:0===e.indexOf("../")?"../".length:0,n=e.substring(i).split("/").join("_");return t[n]});i.apply(null,n)},t.common_Platform=e(t.d3))}(this,function(t){function e(){}var i="1.14.2";return e.prototype.version=function(){return i},e.prototype.ieVersion=function(){var t,e=navigator.userAgent,i=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],parseFloat(t[1])):/msie/i.test(i[1])?parseFloat(i[2]):null}(),e.prototype.isIE=null!==e.prototype.ieVersion,e.prototype.svgMarkerGlitch=e.prototype.isIE&&e.prototype.ieVersion<=12,e.prototype.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||function(t){this.callback=t,this.listeners=[];var e=function(t,e,i){this.callback=t,this.domNode=e,this.type=i};e.prototype={handleEvent:function(t){var e={type:this.type,target:this.domNode,addedNodes:[],removedNodes:[],previousSibling:t.target.previousSibling,nextSibling:t.target.nextSibling,attributeName:null,attributeNamespace:null,oldValue:null};this.callback([e])}},this.observe=function(t,i){var n=null;i.attributes&&(n=new e(this.callback,t,"attributes"),this.listeners.push(n),t.addEventListener("DOMAttrModified",n,!0)),i.characterData&&(n=new e(this.callback,t,"characterData"),this.listeners.push(n),t.addEventListener("DOMCharacterDataModified",n,!0)),i.childList&&(n=new e(this.callback,t,"childList"),this.listeners.push(n),t.addEventListener("DOMNodeInserted",n,!0),t.addEventListener("DOMNodeRemoved",n,!0))},this.disconnect=function(){this.listeners.forEach(function(t){switch(t.type){case"attributes":t.domNode.removeEventListener("DOMAttrModified",t,!0);break;case"characterData":t.domNode.removeEventListener("DOMCharacterDataModified",t,!0);break;case"childList":t.domNode.removeEventListener("DOMNodeRemoved",t,!0),t.domNode.removeEventListener("DOMNodeInserted",t,!0)}}),this.listeners=[]}},window.MutationObserver||(window.MutationObserver=e.prototype.MutationObserver),e.prototype._scrollBarWidth=null,e.prototype.getScrollbarWidth=function(){if(null===e.prototype._scrollBarWidth){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var i=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var o=n.offsetWidth;t.parentNode.removeChild(t),e.prototype._scrollBarWidth=i-o}return e.prototype._scrollBarWidth},e.prototype.debounce=function(t,e,i){return function(){function n(){i||t.apply(o,r),o.__hpcc_debounce_timeout=null}var o=this||{},r=arguments;o.__hpcc_debounce_timeout?clearTimeout(o.__hpcc_debounce_timeout):i&&t.apply(o,r),o.__hpcc_debounce_timeout=setTimeout(n,e||100)}},Math.sign=Math.sign||function(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1},e}),function(t,e){"function"==typeof define&&define.amd?define("src/common/PropertyExt",["./Class"],e):t.common_PropertyExt=e(t.common_Class)}(this,function(t){function e(t){return 0===t.indexOf(a)}function i(t,e){return t[s+e]}function n(t,e,i,n,o,r){switch(r=r||{},this.id=t,this.type=i,this.origDefaultValue=e,this.defaultValue=r.optional&&null===e?void 0:e,this.description=n,this.set=o,this.ext=r,i){case"set":this.checkedAssign=function(e){var n="function"==typeof o?o.call(this):o;return(!n||n.indexOf(e)<0)&&console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"html-color":this.checkedAssign=function(e){if(window.__hpcc_debug&&e&&"red"!==e){var n="red",o=document.createElement("div");o.style.color=n,o.style.color=e,(o.style.color===n||""===o.style.color)&&console.error("Invalid value for '"+t+"':  "+e+" expected "+i)}return e};break;case"boolean":this.checkedAssign=function(t){return"string"==typeof t&&["false","off","0"].indexOf(t.toLowerCase())>=0?!1:Boolean(t)};break;case"number":this.checkedAssign=function(t){return Number(t)};break;case"string":this.checkedAssign=function(t){return String(t)};break;case"array":this.checkedAssign=function(e){return e instanceof Array||console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"object":this.checkedAssign=function(e){return e instanceof Object||console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"widget":this.checkedAssign=function(e){return(!e._class||e._class.indexOf("common_PropertyExt")<0)&&console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"widgetArray":this.checkedAssign=function(e){return e.some(function(t){return!t._class||t._class.indexOf("common_Widget")<0})&&console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"propertyArray":this.checkedAssign=function(e){return e.some(function(t){return!t.publishedProperties})&&console.log("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;default:this.checkedAssign=function(e){return window.__hpcc_debug&&console.error("Unchecked property type for '"+t+"':  "+e+" expected "+i),e}}}function o(t,e,i,n,o){this.id=t,this.type="proxy",this.proxy=e,this.method=i,this.defaultValue=n,this.ext=o||{}}function r(){t.call(this),this._id="_pe"+ ++d,this._watchArrIdx=0,this._watchArr={},this.publishedProperties(!0).forEach(function(t){switch(t.type){case"array":case"widgetArray":case"propertyArray":this[t.id+"_reset"]()}},this)}var a="__meta_",s="__private_",c="__prop_",f="__default_",d=0;return r.prototype=Object.create(t.prototype),r.prototype._class+=" common_PropertyExt",r.prototype.id=function(){return this._id},r.prototype.publishedProperties=function(t,n){var o=[];for(var r in this)if(e(r)&&(t||!i(this,r))){var a=this[r];if(n&&a.type){for(var s=this;"proxy"===a.type;)s=s[a.proxy],a=s.publishedProperty(a.method);a.id!==this[r].id&&(a=JSON.parse(JSON.stringify(a)),a.id=this[r].id)}o.push(a)}return o},r.prototype.propertyWalker=function(t,e){this.publishedProperties(!1,!0).forEach(function(i){"function"==typeof t&&t(this,i)||e(this,i)},this)},r.prototype.publishedProperty=function(t){return this[a+t]},r.prototype.publishedModified=function(t){return this.publishedProperties().some(function(t){return this[t.id+"_modified"]()},this)},r.prototype.publishReset=function(t,i){t=(t||[]).map(function(t){return a+t}),i=(i||[]).map(function(t){return a+t});for(var n in this)if(e(n)){var o=!t.length||t.length&&t.indexOf(n)>=0,r=i.indexOf(n)>=0;o&&!r&&(this[s+n]=!0)}},r.prototype.publish=function(t,e,i,o,r,d){if(d=d||{},void 0!==this[a+t]&&!d.override)throw t+" is already published.";var h=this[a+t]=new n(t,e,i,o,r,d);h.ext.internal&&(this[s+t]=!0),this[t]=function(e){return arguments.length?(void 0===e?e=null:""===e&&h.ext.optional?e=null:null!==e&&(e=h.checkedAssign.call(this,e)),this.broadcast(t,e,this[c+t]),null===e?delete this[c+t]:this[c+t]=e,this):this[t+"_disabled"]()?this[t+"_default"]():void 0!==this[c+t]?this[c+t]:this[t+"_default"]()},this[t+"_disabled"]=function(){return d&&d.disable?!!d.disable(this):!1},this[t+"_modified"]=function(){return void 0!==this[c+t]},this[t+"_exists"]=function(){return void 0!==this[c+t]||void 0!==this[t+"_default"]()},this[t+"_default"]=function(e){return arguments.length?(""===e&&(e=null),null===e?delete this[f+t]:this[f+t]=e,this):void 0!==this[f+t]?this[f+t]:h.defaultValue},this[t+"_reset"]=function(){switch(i){case"widget":this[c+t]&&this[c+t].target(null);break;case"widgetArray":this[c+t]&&this[c+t].forEach(function(t){t.target(null)})}switch(i){case"array":case"widgetArray":case"propertyArray":this[f+t]=this[t+"_default"]().map(function(t){return t})}return delete this[c+t],this},this[t+"_options"]=function(){if("function"==typeof r){var t=h.ext.optional?[null]:[];return t.concat(r.apply(this,arguments))}return r}},r.prototype.publishWidget=function(t,e,i){for(var n in e.prototype)if(0===n.indexOf("__meta")){var o=e.prototype[n];this.publishProxy(t+c+o.id,i,o.method||o.id)}},r.prototype.publishProxy=function(t,e,i,n){if(i=i||t,void 0!==this[a+t])throw t+" is already published.";this[a+t]=new o(t,e,i,n),this[t]=function(o){return arguments.length?(void 0!==n&&o===n?this[e][i+"_reset"]():this[e][i](o),this):void 0===n||this[t+"_modified"]()?this[e][i]():n},this[t+"_disabled"]=function(){return this[e][i+"_disabled"]()},this[t+"_modified"]=function(){return this[e][i+"_modified"]()&&(void 0===n||this[e][i]()!==n)},this[t+"_exists"]=function(){return this[e][i+"_exists"]()},this[t+"_default"]=function(t){return arguments.length?(this[e][i+"_default"](t),this):this[e][i+"_default"]()},this[t+"_reset"]=function(){return this[e][i+"_reset"](),this},this[t+"_options"]=function(){return this[e][i+"_options"]()}},r.prototype.monitorProperty=function(t,e){var i=this.publishedProperty(t);switch(i.type){case"proxy":return this[i.proxy]?this[i.proxy].monitorProperty(i.method,function(t,n,o){e(i.id,n,o)}):{remove:function(){}};default:var n=this._watchArrIdx++;this._watchArr[n]={propertyID:t,callback:e};var o=this;return{remove:function(){delete o._watchArr[n]}}}return null},r.prototype.monitor=function(t){return{_watches:this.publishedProperties().map(function(e){return this.monitorProperty(e.id,t)},this),remove:function(){this._watches.forEach(function(t){t.remove()})}}},r.prototype.broadcast=function(t,e,i,n){if(n=n||this,e!==i)for(var o in this._watchArr){var r=this._watchArr[o];void 0!==r.propertyID&&r.propertyID!==t||!r.callback||setTimeout(function(o){o.callback(t,e,i,n)},0,r)}},r.prototype.applyTheme=function(t){if(t){var e=this._class.split(" ");for(var i in e)if(t[e[i]])for(var n in t[e[i]])if("overrideTags"===n&&t[e[i]][n]instanceof Object)for(var o in t[e[i]][n])this.publishedProperty(n).ext&&(this.publishedProperty(n).ext.tags=t[e[i]][n][o]);else this.publishedProperty(n)&&(this.publishedProperty(n).defaultValue=t[e[i]][n])}},r.prototype.copyPropsTo=function(t){this.publishedProperties(!1).forEach(function(e){this[e.id+"_exists"]()?t[e.id](this[e.id]()):t[e.id+"_reset"]()},this)},r}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Database",["d3","./Class","./PropertyExt","./Utility"],e):t.common_Database=e(t.d3,t.common_Class,t.common_PropertyExt,t.common_Utility)}(this,function(t,e,i,n){function o(t){e.call(this),i.call(this),this._id=t||this._id}function r(t){t=t||!1,e.call(this),i.call(this),this._dataChecksum=t,this._dataVersion=0,this.clear()}function a(e){this._grid=e,t.rebind(this,this._grid,"checksum","fields")}function s(t,e,i){a.call(this,t),e instanceof Array||(e=[e]),this._columnIndicies=e.filter(function(t){return t}).map(function(t){switch(typeof t){case"string":return this._grid.fieldByLabel(t).idx}return t},this),i=i||function(t){return t},this._rollup=i}function c(t,e){return t instanceof Array||(t=[t]),t.filter(function(t){return""!==t}).every(e)}function f(t){return"boolean"==typeof t}function d(t){return"number"==typeof t||!isNaN(t)}function h(t){return"string"==typeof t}function l(e,i){for(var n=0;n<e.length;++n){var o=t.time.format(e[n]).parse(i);if(o)return g=e[n],e[n]}return null}function u(t){return l(_,t)}function p(t){return l(x,t)}function b(t){return l(v,t)}function m(t){return["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","AS","DC","FM","GU","MH","MP","PW","PR","VI"].indexOf(String(t).toUpperCase())>=0}o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype.mixin(i),o.prototype._class+=" common_Database.Field",o.prototype.id=function(){return this._id},o.prototype.checksum=function(){return n.checksum(this.label()+this.type()+this.mask()+this.format())},o.prototype.publish("label","","string","Label",null,{optional:!0}),o.prototype.publish("type","","set","Type",["","string","number","boolean","time"],{optional:!0}),o.prototype.publish("mask","","string","Time Mask",null,{disable:function(t){return"time"!==t.type()},optional:!0}),o.prototype.publish("format","","string","Format",null,{optional:!0}),o.prototype.typeTransformer=function(t){switch(this.type()){case"number":return Number(t);case"string":return String(t);case"boolean":return"string"==typeof t&&["false","off","0"].indexOf(t.toLowerCase())>=0?!1:Boolean(t);case"time":case"date":return this.maskTransformer(t)}return t},o.prototype.maskTransformer=function(t){return this.formatter(this.mask()).parse(t)},o.prototype.formatTransformer=function(t){return this.formatter(this.format())(t)},o.prototype.parse=function(t){if(!t)return t;try{return this.typeTransformer(t)}catch(e){return console.log("Unable to parse:  "+t),null}},o.prototype.transform=function(t){if(!t)return t;try{return this.formatTransformer(this.typeTransformer(t))}catch(e){return console.log("Unable to transform:  "+t),null}},o.prototype.clone=function(){function t(t,i){t[i+"_default"](e[i+"_default"]()),e[i+"_exists"]()&&t[i](e[i]())}var e=this,i=new o(this._id);return t(i,"label"),t(i,"type"),t(i,"mask"),t(i,"format"),i},o.prototype.formatter=function(e){var i;if(!e)return i=function(t){return t},i.parse=function(t){return t},i;switch(this.type()){case"time":case"date":return t.time.format(e)}return i=t.format(e),i.parse=function(t){return t},i},r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.mixin(i),r.prototype._class+=" common_Database.Grid",r.prototype.publish("fields",[],"propertyArray","Fields"),r.prototype.clear=function(){return this.fields([]),this._data=[],this._dataChecksums=[],++this._dataVersion,this},r.prototype.resetColumns=function(t){var e=this.fields();this.legacyColumns([]),this.legacyColumns(e.map(function(t){return t.label()}))},r.prototype.legacyColumns=function(t){return arguments.length?(this.row(0,t),this):this.row(0)},r.prototype.legacyData=function(t,e){return r.prototype.data.apply(this,arguments)},r.prototype.field=function(t){return this.fields()[t]};var y=r.prototype.fields;r.prototype.fields=function(t,e){return arguments.length?y.call(this,e?t.map(function(t){return t.clone()}):t):y.apply(this,arguments)},r.prototype.fieldByLabel=function(t,e){return this.fields().filter(function(i,n){return i.idx=n,e?i.label().toLowerCase()===t.toLowerCase():i.label()===t})[0]},r.prototype.data=function(t,e){return arguments.length?(this._data=e?t.map(function(t){return t.map(function(t){return t})}):t,this._dataCalcChecksum(),this):this._data},r.prototype.parsedData=function(){var t=this;return this._data.map(function(e){return e.map(function(e,i){return t.fields()[i].parse(e)})})},r.prototype.formattedData=function(){var t=this;return this._data.map(function(e){return e.map(function(e,i){return t.fields()[i].transform(e)})})},r.prototype.fieldsChecksum=function(){return n.checksum(this.fields().map(function(t){return t.checksum()}))},r.prototype.dataChecksum=function(){return n.checksum(this._dataChecksum?this._dataChecksums:this._dataVersion)},r.prototype.checksum=function(){return n.checksum([this.dataChecksum(),this.fieldsChecksum()])},r.prototype._dataCalcChecksum=function(t){return++this._dataVersion,this._dataChecksum&&(arguments.length?this._dataChecksums[t]=n.checksum(this._data[t]):this._dataChecksums=this._data.map(function(t){return n.checksum(t)})),this},r.prototype.row=function(t,e){if(arguments.length<2)return 0===t?this.fields().map(function(t){return t.label()}):this._data[t-1];if(0===t){var i=this.fields();this.fields(e.map(function(t,e){return(i[e]||new o).label_default(t)},this))}else this._data[t-1]=e,this._dataCalcChecksum(t-1);return this},r.prototype.rows=function(t){return arguments.length?(this.row(0,t[0]),this._data=t.filter(function(t,e){return e>0}),this._dataCalcChecksum(),this):[this.row(0)].concat(this._data)},r.prototype.column=function(t,e){return arguments.length<2?[this.fields()[t].label()].concat(this._data.map(function(e,i){return e[t]})):(e.forEach(function(i,n){0===n?this.fields()[t]=(new o).label(e[0]):(this._data[n-1][t]=i,this._dataCalcChecksum(n-1))},this),this)},r.prototype.columnData=function(t,e){return arguments.length<2?this._data.map(function(e,i){return e[t]}):(e.forEach(function(e,i){this._data[i][t]=e,this._dataCalcChecksum(i)},this),this)},r.prototype.columns=function(t){return arguments.length?(t.forEach(function(e,i){this.column(i,t[i])},this),this):this.fields().map(function(t,e){return this.column(e)},this)},r.prototype.cell=function(t,e,i){return arguments.length<3?this.row(t)[e]:(0===t?this.fields()[e]=(new o).label(i):(this._data[t][e]=i,this._dataCalcChecksum(t)),this)},r.prototype.grid=function(t){return r.prototype.rows.apply(this,arguments)},r.prototype.hipieMapSortArray=function(t){return t.map(function(t){var e=!1;0===t.indexOf("-")&&(t=t.substring(1),e=!0);var i=this.fieldByLabel(t,!0);return i||console.log("Grid.prototype.hipieMapSortArray:  Invalid sort array - "+t),{idx:i?i.idx:-1,reverse:e}},this).filter(function(t){return t.idx>=0})},r.prototype.hipieMappings=function(e,i){function n(t,e,i,o){var r=i.map(function(t){return t});r[e]=t.key,t.values instanceof Array?t.values.forEach(function(t){n(t,e+1,r,o)}):(r[e+1]=t.values,o.push(r))}if(i=i||"",!this.fields().length||!this._data.length)return[];var o=-1,r=[],a=[],s=-1,c=[];if(e.forEach(function(t,e){if(t instanceof Object)switch(t["function"]){case"SUM":case"AVE":case"MIN":case"MAX":o>=0&&console.log("Rollup field already exists - there should only be one?"),o=e,t.params.forEach(function(t){var e=this.fieldByLabel(t.param1,!0);e?r.push(e.idx):console.log("Grid.prototype.hipieMappings:  Invalid rollup field - "+t.param1)},this);break;case"SCALE":s>=0&&console.log("Scale field already exists - there should only be one?"),s=e,t.params.forEach(function(t){var e=this.fieldByLabel(t.param1,!0);if(e){var i=e.idx,n=t.param2;c.push(function(t){return t[i]/n})}else console.log("Grid.prototype.hipieMappings:  Invalid scale field - "+t.param1)},this);break;default:console.log("Unknown field function - "+t["function"])}else if(t.indexOf("_AVE")===t.length-4&&this.fieldByLabel(t.substring(0,t.length-4)+"_SUM",!0)&&this.fieldByLabel("base_count",!0)){console.log("Deprecated - Symposium AVE Hack");var n=this.fieldByLabel(t.substring(0,t.length-4)+"_SUM",!0),f=this.fieldByLabel("base_count",!0);a.push(n.idx),c.push(function(t){return t[n.idx]/t[f.idx]})}else{var d=this.fieldByLabel(t,!0);d?(a.push(d.idx),c.push(function(t){return void 0!==t[d.idx]&&null!==t[d.idx]?t[d.idx]:i})):(console.log("Unable to locate '"+t+"' in server response."),c.push(function(t){return i}))}},this),o>=0){var f=e[o],d=[];for(var h in f.params)d.push(f.params[h]);var l=this.rollup(a,function(e){switch(f["function"]){case"SUM":return t.sum(e,function(t){return t[r[0]]});case"AVE":return t.mean(e,function(t){return t[r[0]]});case"MIN":return t.min(e,function(t){return t[r[0]]});case"MAX":return t.max(e,function(t){return t[r[0]]})}return console.log("Unsupported Mapping Function:  "+f["function"]),0}),u=[];return l instanceof Array?l.forEach(function(t){n(t,0,[],u)}):u.push([l]),u}return this._data.map(function(t){
var e=[];return c.forEach(function(i){e.push(i(t))}),e})},a.prototype.constructor=a,a.prototype.grid=function(){return this._grid},a.prototype.columns=function(t){return arguments.length?(this._grid.legacyColumns(t),this):this._grid.legacyColumns()},a.prototype.rawData=function(t){return arguments.length?(this._grid.legacyData(t),this):this._grid.legacyData()},a.prototype.formattedData=function(){return this._formattedDataChecksum!==this._grid.checksum()&&(this._formattedDataChecksum=this._grid.checksum(),this._formattedData=this._grid.formattedData()),this._formattedData},a.prototype.parsedData=function(){return this._parsedDataChecksum!==this._grid.checksum()&&(this._parsedDataChecksum=this._grid.checksum(),this._parsedData=this._grid.parsedData()),this._parsedData},a.prototype._whichData=function(t){if(t){if(t.parsed)return this.formattedData();if(t.formatted)return this.formattedData()}return this.rawData()},a.prototype.data=function(t){return a.prototype.rawData.apply(this,arguments)},s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.nest=function(){if(this._nestChecksum!==this._grid.checksum()){this._nestChecksum=this._grid.checksum();var e=t.nest();this._columnIndicies.forEach(function(t){e.key(function(e){return e[t]})}),this._nest=e.rollup(this._rollup)}return this._nest},s.prototype.entries=function(t){return this.nest().entries(this._whichData(t))},s.prototype.map=function(t){return this.nest().map(this._whichData(t))},s.prototype.d3Map=function(e){return this.nest().map(this._whichData(e),t.map)},s.prototype._walkData=function(t,e){e=e||[];var i=[];return t.forEach(function(t){t instanceof Array?i.push(e.concat([t])):i=i.concat(this._walkData(t.values,e.concat([t.key])))},this),i},s.prototype.data=function(t){return this._walkData(this.entries(t))},r.prototype.legacyView=function(){return new a(this)},r.prototype.nestView=function(t){return new s(this,t)},r.prototype.rollupView=function(t,e){return new s(this,t,e)},r.prototype.aggregateView=function(e,i,n,o){var r=this;return new s(this,e,function(e){switch(i){case null:case void 0:case"":return e.aggregate=e.length,e;default:var a=r.legacyColumns(),s=a.indexOf(n),c=a.indexOf(o);return e.aggregate=t[i](e,function(t){return(+t[s]-(c>=0?+t[c]:0))/(c>=0?+t[c]:1)}),e}})},r.prototype._nest=function(e,i){e instanceof Array||(e=[e]);var n=t.nest();return e.forEach(function(t){n.key(function(e){return e[t]})}),n},r.prototype.nest=function(t){return this._nest(t).entries(this._data)},r.prototype.rollup=function(t,e){return this._nest(t).rollup(e).entries(this._data)},r.prototype.length=function(){return this._data.length+1},r.prototype.width=function(){return this.fields().length},r.prototype.pivot=function(){return this.resetColumns(),this.rows(this.columns()),this},r.prototype.clone=function(t){return(new r).fields(this.fields(),t).data(this.data(),t)},r.prototype.filter=function(t){var e={};return this.row(0).forEach(function(t,i){e[t]=i}),(new r).fields(this.fields(),!0).data(this.data().filter(function(i){for(var n in t)if(t[n]!==i[e[n]])return!1;return!0}))};var g=null;r.prototype.analyse=function(t){t instanceof Array||(t=[t]);var e=[];return t.forEach(function(t){var i=this.rollup(t,function(t){return t.length});e.push(i);var n=i.map(function(t){return t.key});this.fields()[t].isBoolean=c(n,f),this.fields()[t].isNumber=c(n,d),this.fields()[t].isString=!this.fields()[t].isNumber&&c(n,h),this.fields()[t].isUSState=this.fields()[t].isString&&c(n,m),this.fields()[t].isDateTime=this.fields()[t].isString&&c(n,u),this.fields()[t].isDateTimeFormat=g,this.fields()[t].isDate=!this.fields()[t].isDateTime&&c(n,p),this.fields()[t].isDateFormat=g,this.fields()[t].isTime=this.fields()[t].isString&&!this.fields()[t].isDateTime&&!this.fields()[t].isDate&&c(n,b),this.fields()[t].isTimeFormat=g},this),e},r.prototype.jsonObj=function(t){return arguments.length?(this.clear(),this.data(t.map(function(t,e){var i=[];for(var n in t){var r=this.row(0).indexOf(n);0>r&&(r=this.fields().length,this.fields().push((new o).label(n))),i[r]=t[n]}return i},this)),this):this._data.map(function(t){var e={};return this.row(0).forEach(function(i,n){e[i]=t[n]}),e},this)},r.prototype.json=function(t){return arguments.length?(this.jsonObj(JSON.parse(t)),this):JSON.stringify(this.jsonObj(),null,"  ")},r.prototype.csv=function(e){return arguments.length?(this.jsonObj(t.csv.parse(e)),this):t.csv.formatRows(this.grid())},r.prototype.tsv=function(e){return arguments.length?(this.jsonObj(t.tsv.parse(e)),this):t.tsv.formatRows(this.grid())};var _=[],x=["%Y-%m-%d","%Y%m%d"],v=["%H:%M:%S.%LZ","%H:%M:%SZ","%H:%M:%S"];return x.forEach(function(t){v.forEach(function(e){_.push(t+"T"+e)})}),{Field:o,Grid:r}}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Widget",["d3","./Class","./Platform","./PropertyExt","./Database"],e):t.common_Widget=e(t.d3,t.common_Class,t.common_Platform,t.common_PropertyExt,t.common_Database)}(this,function(t,e,i,n,o){function r(){e.call(this),i.call(this),n.call(this),this._class=Object.getPrototypeOf(this)._class,this._id=this._idSeed+a++,this._db=new o.Grid,this._pos={x:0,y:0},this._size={width:0,height:0},this._scale=1,this._visible=!0,this._target=null,this._parentElement=null,this._parentWidget=null,this._element=t.select(),this._renderCount=0,window.__hpcc_debug&&(void 0===window.g_all&&(window.g_all={}),window.g_all[this._id]=this),window.__hpcc_theme&&this.applyTheme(window.__hpcc_theme)}var a=0;return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.mixin(i),r.prototype.mixin(n),r.prototype._class+=" common_Widget",r.prototype._idSeed="_w",r.prototype.publishProxy("fields","_db","fields"),r.prototype.publish("classed",{},"object","HTML Classes",null,{tags:["Private"]}),r.prototype["export"]=function(t){switch(t){case"TSV":return this._db.tsv();case"JSON":return this._db.json()}return this._db.csv()},r.prototype.leakCheck=function(t){for(var e=this,i=[t],n=new this.MutationObserver(function(t){var o=!1;t.forEach(function(t){for(var r=0;r<t.removedNodes.length;++r){var a=t.removedNodes.item(r);i.indexOf(a)>=0&&e._target&&(o=!0,n.disconnect())}}),o&&console.log("leak:  "+e.id()+" - "+e.classID()+"		widget.target(null); was not called for this widget before it was removed from the page.")}),o=t.parentNode;o;)n.observe(o,{childList:!0}),i.push(o),o=o.parentNode},r.prototype.on=function(e,i,n){var o=this;return this.overrideMethod(e,function(e,r){var a;return n?t.event&&t.event.stopPropagation():a=e.apply(o,r),i.apply(o,r)||a}),this},r.prototype.id=function(t){return arguments.length?(this._id=t,this):this._id},r.prototype.columns=function(t){return arguments.length?(this._db.legacyColumns(t),this):this._db.legacyColumns()},r.prototype.parsedData=function(){return this._db.parsedData()},r.prototype.formattedData=function(){return this._db.formattedData()},r.prototype.data=function(t){return arguments.length?(this._db.legacyData(t),this):this._db.legacyData()},r.prototype.cloneData=function(){return this.data().map(function(t){return t.slice(0)})},r.prototype.flattenData=function(){var t=[];return this.data().forEach(function(e,i){this.columns().filter(function(t,e){return e>0}).forEach(function(n,o){var r=e[o+1];if(r){var a={rowIdx:i,colIdx:o+1,label:e[0],value:r};t.push(a)}},this)},this),t},r.prototype.rowToObj=function(t){var e={};return this.columns().forEach(function(i,n){e[i]=t[n]}),t.length===this.columns().length+1&&(e.__lparam=t[this.columns().length]),e},r.prototype.pos=function(t){return arguments.length?(this._pos=t,this._overlayElement&&this._overlayElement.attr("transform","translate("+t.x+","+t.y+")scale("+this._scale+")"),this):this._pos},r.prototype.x=function(t){return arguments.length?(this.pos({x:t,y:this._pos.y}),this):this._pos.x},r.prototype.y=function(t){return arguments.length?(this.pos({x:this._pos.x,y:t}),this):this._pos.y},r.prototype.size=function(t){return arguments.length?(this._size=t,this._overlayElement&&this._overlayElement.attr("width",t.width).attr("height",t.height),this):this._size},r.prototype.width=function(t){return arguments.length?(this.size({width:t,height:this._size.height}),this):this._size.width},r.prototype.height=function(t){return arguments.length?(this.size({width:this._size.width,height:t}),this):this._size.height},r.prototype.resize=function(t,e){e=e||{width:0,height:0};var i,n;if(t&&t.width&&t.height)i=t.width,n=t.height;else{var o=window.getComputedStyle(this._target,null);i=parseFloat(o.getPropertyValue("width"))-e.width,n=parseFloat(o.getPropertyValue("height"))-e.height}return this.size({width:i,height:n}),this},r.prototype.scale=function(t){return arguments.length?(this._scale=t,this._overlayElement&&this._overlayElement.attr("transform","translate("+t.x+","+t.y+")scale("+this._scale+")"),this):this._scale},r.prototype.visible=function(t){return arguments.length?(this._visible=t,this._parentElement&&this._parentElement.style({visibility:this._visible?null:"hidden",opacity:this._visible?null:0}),this):this._visible},r.prototype.display=function(t){return arguments.length?(this._display=t,this._element&&this._element.style("display",this._display?null:"none"),this):this._display},r.prototype.calcSnap=function(t){function e(t,e){function i(t,e){var i=t%e;return Math.abs(i)>e-Math.abs(i)&&(i=(e-Math.abs(i))*(0>i?1:-1)),i}return t-i(t,e)}var i=e(this._pos.x-this._size.width/2,t),n=e(this._pos.y-this._size.height/2,t),o=e(this._pos.x+this._size.width/2,t),r=e(this._pos.y+this._size.height/2,t),a=o-i,s=r-n;return[{x:i+a/2,y:n+s/2},{width:a,height:s}]},r.prototype.toWidget=function(e){if(!e)return null;var i=t.select(e);if(i){var n=i.datum();if(n&&n instanceof r)return n}return null},r.prototype.locateParentWidget=function(t){if(t=t||(this._target?this._target.parentNode:null)){var e=this.toWidget(t);if(e)return e;if(t.parentNode)return this.locateParentWidget(t.parentNode)}return null},r.prototype.locateSVGNode=function(t){return t?"svg"===t.tagName?t:this.locateSVGNode(t.parentNode):null},r.prototype.locateOverlayNode=function(){for(var t=this.locateParentWidget(this._target);t;){if(t._parentOverlay)return t._parentOverlay;t=this.locateParentWidget(t._target.parentNode)}return null},r.prototype.getAbsolutePos=function(t,e,i){var n=this.locateSVGNode(t);if(!n)return null;var o=n.createSVGPoint(),r=t.getCTM();o=o.matrixTransform(r);var a={x:o.x,y:o.y};if(void 0!==e&&void 0!==i){var s=n.createSVGPoint();s.x=e,s.y=i,s=s.matrixTransform(r),a.width=s.x-o.x,a.height=s.y-o.y}return a},r.prototype.hasOverlay=function(){return this._overlayElement},r.prototype.syncOverlay=function(){if(this._size.width&&this._size.height){var t=this.getAbsolutePos(this._overlayElement.node(),this._size.width,this._size.height);if(t&&(null===this.oldPos||void 0===this.oldPos||t.x!==this.oldPos.x||t.y!==this.oldPos.y||t.width!==this.oldPos.width||t.height!==this.oldPos.height)){var e=t.width/this._size.width,i=t.height/this._size.height;this._parentElement.style({left:t.x-t.width/e/2+"px",top:t.y-t.height/i/2+"px",width:t.width/e+"px",height:t.height/i+"px"});var n="scale("+e+","+i+")";this._parentElement.style("transform",n).style("-moz-transform",n).style("-ms-transform",n).style("-webkit-transform",n).style("-o-transform",n)}this.oldPos=t}},r.prototype.element=function(){return this._element},r.prototype.node=function(){return this._element.node()},r.prototype.render=function(e){if(window.__hpcc_debug){var i=Date.now();i-this._prevNow<500&&console.log("Double Render:  "+(i-this._prevNow)+" - "+this.id()+" - "+this.classID()),this._prevNow=i}if(e=e||function(){},!this._parentElement||!this.visible())return e(this),this;if(this._parentElement){if(!this._tag)throw"No DOM tag specified";var n=this._parentElement.selectAll("#"+this._id).data([this],function(t){return t._id});n.enter().append(this._tag).classed(this._class,!0).attr("id",this._id).each(function(e){e._element=t.select(this),e.enter(this,e._element),window.__hpcc_debug&&e.leakCheck(this)}),n.classed(this.classed()).each(function(t){t.preUpdate(this,t._element),t.update(this,t._element),t.postUpdate(this,t._element)}),n.exit().each(function(e){t.select(this).datum(null),e.exit(this,e._element)}).remove(),this._renderCount++}var o=[];this.publishedProperties(!0).forEach(function(t){if(!t.ext||t.ext.render!==!1)switch(t.type){case"widget":var e=this[t.id]();e&&o.push(this[t.id]());break;case"widgetArray":o=o.concat(this[t.id]())}},this);var r=this;switch(o.length){case 0:e(this);break;case 1:o[0].render(function(){e(r)});break;default:var a=o.length;o.forEach(function(t,i){setTimeout(function(){t.render(function(){0===--a&&e(r)})},0)})}return this},r.prototype.lazyRender=r.prototype.debounce(function(){this.render()},100),r.prototype.enter=function(t,e){},r.prototype.preUpdate=function(t,e){},r.prototype.update=function(t,e){},r.prototype.postUpdate=function(t,e){},r.prototype.exit=function(t,e){},r}),function(t,e){"function"==typeof define&&define.amd?define("src/common/CanvasWidget",["d3","./Widget"],e):t.common_CanvasWidget=e(t.d3,t.common_Widget)}(this,function(t,e){function i(){e.call(this),this._tag="canvas"}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" common_CanvasWidget",i.prototype.resize=function(t){var i=e.prototype.resize.apply(this,arguments);return this._parentElement.style("width",this._size.width+"px").style("height",this._size.height+"px"),this._element.attr("width",this._size.width),this._element.attr("height",this._size.height),i},i.prototype.target=function(e){if(!arguments.length)return this._target;if(this._target&&e)throw"Target can only be assigned once.";if(this._target=e,("string"==typeof this._target||this._target instanceof String)&&(this._target=document.getElementById(this._target)),this._target){if(this._parentElement=t.select(this._target),!this._size.width&&!this._size.height){var i=parseFloat(this._parentElement.style("width")),n=parseFloat(this._parentElement.style("height"));this.size({width:i,height:n}),this.resize(this._size)}}else this.exit();return this},i.prototype.exit=function(){this._parentElement&&this._parentElement.remove(),e.prototype.exit.apply(this,arguments)},i}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Transition",[],e):t.common_Transition=e()}(this,function(){function t(t){this._widget=t,this._duration=250,this._delay=0,this._ease="cubic-in-out"}return t.prototype.duration=function(t){return arguments.length?(this._duration=t,this._widget):this._duration},t.prototype.delay=function(t){return arguments.length?(this._delay=t,this._widget):this._delay},t.prototype.ease=function(t){return arguments.length?(this._ease=t,this._widget):this._ease},t.prototype.apply=function(t){return this._duration||this._delay?t.transition().duration(this._duration).delay(this._delay).ease(this._ease):t},t}),function(t,e){"function"==typeof define&&define.amd?define("src/common/SVGWidget",["d3","./Widget","./Transition"],e):t.common_SVGWidget=e(t.d3,t.common_Widget,t.common_Transition)}(this,function(t,e,i){function n(){e.call(this),this._tag="g",this._boundingBox=null,this.transition=new i(this),this._drawStartPos="center"}n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" common_SVGWidget",n.prototype.move=function(t,e){var i=this.pos.apply(this,arguments);return arguments.length&&(e?this._element.transition().duration(e):this._element).attr("transform","translate("+t.x+" "+t.y+")"),i},n.prototype.size=function(t){var i=e.prototype.size.apply(this,arguments);return arguments.length&&(this._boundingBox=null),i},n.prototype.resize=function(t){var i=e.prototype.resize.apply(this,arguments);if(this._parentRelativeDiv)switch(this._parentRelativeDiv.style({width:this._size.width+"px",height:this._size.height+"px"}),this._drawStartPos){case"origin":this.pos({x:0,y:0});break;case"center":default:this.pos({x:this._size.width/2,y:this._size.height/2})}return this._parentElement.attr("width",this._size.width).attr("height",this._size.height),i},n.prototype.target=function(e){if(!arguments.length)return this._target;if(this._target&&e&&this._target.__data__.id!==e.__data__.id)throw"Target can only be assigned once.";return this._target=e,("string"==typeof this._target||this._target instanceof String)&&(this._target=document.getElementById(this._target)),this._target instanceof SVGElement?(this._parentElement=t.select(this._target),this._parentWidget=this._parentElement.datum(),this._parentWidget&&this._parentWidget._id!==this._id||(this._parentWidget=this.locateParentWidget(this._target.parentNode)),this._parentOverlay=this.locateOverlayNode()):this._target?(this._parentRelativeDiv=t.select(this._target).append("div").style({position:"relative"}),this._parentElement=this._parentRelativeDiv.append("svg").style({position:"absolute",top:0,left:0}),this._parentOverlay=this._parentRelativeDiv.append("div").style({position:"absolute",top:0,left:0}),this.resize(this._size)):this.exit(),this},n.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments)},n.prototype.update=function(t,i){e.prototype.update.apply(this,arguments)},n.prototype.postUpdate=function(t,i){e.prototype.postUpdate.apply(this,arguments),"origin"===this._drawStartPos&&this._target instanceof SVGElement?this._element.attr("transform","translate("+(this._pos.x-this._size.width/2)+","+(this._pos.y-this._size.height/2)+")scale("+this._scale+")"):this._element.attr("transform","translate("+this._pos.x+","+this._pos.y+")scale("+this._scale+")")},n.prototype.exit=function(t,i){this._parentRelativeDiv&&(this._parentOverlay.remove(),this._parentElement.remove(),this._parentRelativeDiv.remove()),e.prototype.exit.apply(this,arguments)},n.prototype.getOffsetPos=function(){var t={x:0,y:0};return this._parentWidget?(t=this._parentWidget.getOffsetPos(),t.x+=this._pos.x,t.y+=this._pos.y,t):t},n.prototype.getBBox=function(t,e){if(t||null===this._boundingBox){var i=this._element.node();i instanceof SVGElement&&(this._boundingBox=i.getBBox())}return null===this._boundingBox?{x:0,y:0,width:0,height:0}:{x:(e?Math.round(this._boundingBox.x):this._boundingBox.x)*this._scale,y:(e?Math.round(this._boundingBox.y):this._boundingBox.y)*this._scale,width:(e?Math.round(this._boundingBox.width):this._boundingBox.width)*this._scale,height:(e?Math.round(this._boundingBox.height):this._boundingBox.height)*this._scale}},n.prototype.intersection=function(t,e){return this.intersectRect(t,e)};var o=function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}},r=function(t,e,i,n){var o={type:"",points:[]},r=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),a=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),s=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==s){var c=r/s,f=a/s;c>=0&&1>=c&&f>=0&&1>=f?(o.type="Intersection",o.points.push({x:t.x+c*(e.x-t.x),y:t.y+c*(e.y-t.y)})):o.type="No Intersection"}else 0===r||0===a?o.type="Coincident":o.type="Parallel";return o};n.prototype.intersectRect=function(t,e){var i=this.getOffsetPos(),n=this.getBBox();if(t.x===e.x&&t.y===e.y)return t;var o={x:i.x-n.width/2,y:i.y-n.height/2},a={x:i.x+n.width/2,y:i.y-n.height/2},s={x:i.x+n.width/2,y:i.y+n.height/2},c={x:i.x-n.width/2,y:i.y+n.height/2},f=r(o,a,t,e);return f.points.length?{x:f.points[0].x,y:f.points[0].y}:(f=r(a,s,t,e),f.points.length?{x:f.points[0].x,y:f.points[0].y}:(f=r(s,c,t,e),f.points.length?{x:f.points[0].x,y:f.points[0].y}:(f=r(c,o,t,e),f.points.length?{x:f.points[0].x,y:f.points[0].y}:null)))};var a=function(t,e,i,n){var r={type:"",points:[]},a=(n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y),s=2*((n.x-i.x)*(i.x-t.x)+(n.y-i.y)*(i.y-t.y)),c=t.x*t.x+t.y*t.y+i.x*i.x+i.y*i.y-2*(t.x*i.x+t.y*i.y)-e*e,f=s*s-4*a*c;if(0>f)r.type="Outside";else if(0===f)r.type="Tangent";else{var d=Math.sqrt(f),h=(-s+d)/(2*a),l=(-s-d)/(2*a);(0>h||h>1)&&(0>l||l>1)?0>h&&0>l||h>1&&l>1?r.type="Outside":r.type="Inside":(r.type="Intersection",h>=0&&1>=h&&r.points.push(o(i,n,h)),l>=0&&1>=l&&r.points.push(o(i,n,l)))}return r};return n.prototype.intersectCircle=function(t,e){var i=this.getOffsetPos(),n=this.radius(),o=a(i,n,t,e);return o.points.length?{x:o.points[0].x,y:o.points[0].y}:null},n.prototype.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},n.prototype._pushMarkers=function(t,e){this.svgMarkerGlitch&&(t=t||this._element,t.selectAll("path[marker-start],path[marker-end]").attr("fixme-start",function(t){return this.getAttribute("marker-start")}).attr("fixme-end",function(t){return this.getAttribute("marker-end")}).attr("marker-start",null).attr("marker-end",null))},n.prototype._popMarkers=function(t,e){this.svgMarkerGlitch&&(t=t||this._element,t.selectAll("path[fixme-start],path[fixme-end]").attr("marker-start",function(t){return this.getAttribute("fixme-start")}).attr("marker-end",function(t){return this.getAttribute("fixme-end")}).attr("fixme-start",null).attr("fixme-end",null))},n.prototype._popMarkersDebounced=e.prototype.debounce(function(t,e){this.svgMarkerGlitch&&this._popMarkers(t,e)},250),n.prototype._fixIEMarkers=function(t,e){this.svgMarkerGlitch&&(this._pushMarkers(t,e),this._popMarkersDebounced(t,e))},n}),define("css!src/common/Text",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Text",["./SVGWidget","css!./Text"],e):t.common_Text=e(t.common_SVGWidget)}(this,function(t){function e(){t.call(this)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._class+=" common_Text",e.prototype.publish("text","","string","Display Text",null,{tags:["Basic"]}),e.prototype.publish("fontFamily",null,"string","Font Family",null,{tags:["Intermediate"],optional:!0}),e.prototype.publish("fontSize",null,"number","Font Size (px)",null,{tags:["Intermediate"]}),e.prototype.publish("anchor","middle","set","Anchor Position",["start","middle","end"],{tags:["Intermediate"]}),e.prototype.publish("colorFill",null,"html-color","Fill Color",null,{tags:["Basic"]}),e.prototype.publish("rotation",0,"number","Degrees of rotation",null,{tags:["Basic"]}),e.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments),this._textElement=i.append("text")},e.prototype.update=function(e,i){t.prototype.update.apply(this,arguments);var n=this;this._textElement.attr("font-family",this.fontFamily()).attr("font-size",this.fontSize());var o=this.text().split("\n"),r=this._textElement.selectAll("tspan").data(o);r.enter().append("tspan").attr("class",function(t,e){return"tspan_"+e}).attr("dy","1em").attr("x","0"),r.style("fill",this.colorFill()).text(function(t){return t}),r.exit().remove();var a={width:0,height:0};try{a=this._textElement.node().getBBox()}catch(s){}var c=-(a.x+a.width/2),f=-(a.y+a.height/2);switch(this.anchor()){case"start":c=-a.x+a.width/2;break;case"end":c=a.x+a.width/2}var d=-this.rotation()*Math.PI/180;c=-1*Math.abs(c*Math.cos(d)+f*Math.sin(d)),f=-1*Math.abs(c*Math.sin(d)+f*Math.cos(d)),this._textElement.style("text-anchor",this.anchor()).attr("transform",function(t){return"translate("+c+","+f+")rotate("+n.rotation()+")"})},e}),define("css!src/common/FAChar",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/FAChar",["./SVGWidget","./Text","css!font-awesome","css!./FAChar"],e):t.common_FAChar=e(t.common_SVGWidget,t.common_Text)}(this,function(t,e){function i(){t.call(this),this._text=(new e).fontFamily("FontAwesome")}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype._class+=" common_FAChar",i.prototype.publish("char","","string","Font Awesome Item",null,{tags:["Private"]}),i.prototype.publish("fontSize",null,"number","Font Size",null,{tags:["Private"]}),i.prototype.publishProxy("text_colorFill","_text","colorFill"),i.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments),this._text.target(e)},i.prototype.update=function(e,i){t.prototype.update.apply(this,arguments),this._text.text(this["char"]()).scale((this.fontSize()||14)/14).render()},i.prototype.exit=function(e,i){this._text.target(null),t.prototype.exit.apply(this,arguments)},i}),function(t,e){"function"==typeof define&&define.amd?define("src/common/HTMLWidget",["d3","./Widget","./Transition"],e):t.common_HTMLWidget=e(t.d3,t.common_Widget,t.common_Transition)}(this,function(t,e,i){function n(){e.call(this),this._drawStartPos="origin",this._tag="div",this._boundingBox=null}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" common_HTMLWidget",n.prototype.calcFrameWidth=function(t){var e=parseFloat(t.style("padding-left"))+parseFloat(t.style("padding-right"))+parseFloat(t.style("margin-left"))+parseFloat(t.style("margin-right"))+parseFloat(t.style("border-left-width"))+parseFloat(t.style("border-right-width"));return e},n.prototype.calcWidth=function(t){return parseFloat(t.style("width"))-this.calcFrameWidth(t)},n.prototype.calcFrameHeight=function(t){var e=parseFloat(t.style("padding-top"))+parseFloat(t.style("padding-bottom"))+parseFloat(t.style("margin-top"))+parseFloat(t.style("margin-bottom"))+parseFloat(t.style("border-top-width"))+parseFloat(t.style("border-bottom-width"));return e},n.prototype.calcHeight=function(t){return parseFloat(t.style("height"))+this.calcFrameHeight(t)},n.prototype.hasHScroll=function(t){return t=t||this._element,t.property("scrollWidth")>t.property("clientWidth")},n.prototype.hasVScroll=function(t){return t=t||this._element,t.property("scrollHeight")>t.property("clientHeight")},n.prototype.clientWidth=function(){return this._size.width-this.calcFrameWidth(this._element)},n.prototype.clientHeight=function(){return this._size.height-this.calcFrameHeight(this._element)},n.prototype.getBBox=function(t,e){if(t||null===this._boundingBox){var i=this._element.node()?this._element.node().firstElementChild:null;if(i instanceof Element){var n=i.getBoundingClientRect();this._boundingBox={x:n.left,y:n.top,width:n.width,height:n.height}}}return null===this._boundingBox?{x:0,y:0,width:0,height:0}:{x:(e?Math.round(this._boundingBox.x):this._boundingBox.x)*this._scale,y:(e?Math.round(this._boundingBox.y):this._boundingBox.y)*this._scale,width:(e?Math.round(this._boundingBox.width):this._boundingBox.width)*this._scale,height:(e?Math.round(this._boundingBox.height):this._boundingBox.height)*this._scale}},n.prototype.resize=function(t){var i=e.prototype.resize.apply(this,arguments);return this._parentElement.style("width",this._size.width+"px").style("height",this._size.height+"px"),i},n.prototype.target=function(e){if(!arguments.length)return this._target;if(this._target&&e)throw"Target can only be assigned once.";if(this._target=e,("string"==typeof this._target||this._target instanceof String)&&(this._target=document.getElementById(this._target)),this._target instanceof SVGElement){var i=this.locateOverlayNode();this._parentElement=i.append("div").style({position:"absolute",top:0,left:0,overflow:"hidden"}),this._overlayElement=t.select(this._target);var n=this;this.oldPos=null,this.observer=new this.MutationObserver(function(t){n.syncOverlay()});for(var o=this._overlayElement.node();o;)this.observer.observe(o,{attributes:!0}),o=o.parentNode}else if(this._target){if(this._parentElement=t.select(this._target),!this._size.width&&!this._size.height){var r=parseFloat(this._parentElement.style("width")),a=parseFloat(this._parentElement.style("height"));this.size({width:r,height:a})}this._parentElement=t.select(this._target).append("div")}else this.exit();return this},n.prototype.postUpdate=function(t,i){if(e.prototype.postUpdate.apply(this,arguments),"origin"===this._drawStartPos)this._element.style({position:"relative",left:this._pos.x+"px",top:this._pos.y+"px"});else{var n=this.getBBox(!0);this._element.style({position:"relative","float":"left",left:this._pos.x+(this._size.width-n.width)/2+"px",top:this._pos.y+(this._size.height-n.height)/2+"px"})}},n.prototype.exit=function(t,i){this.observer&&this.observer.disconnect(),this.oldPos=null,this._parentElement&&this._parentElement.remove(),e.prototype.exit.apply(this,arguments)},n}),define("css!src/common/Shape",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Shape",["d3","./SVGWidget","css!./Shape"],e):t.common_Shape=e(t.d3,t.common_SVGWidget)}(this,function(t,e){function i(){e.call(this)}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" common_Shape",i.prototype.publish("shape","circle","set","Shape Type",["circle","square","rect","ellipse"],{tags:["Private"]}),i.prototype.publish("width",24,"number","Width",null,{tags:["Private"]}),i.prototype.publish("height",24,"number","Height",null,{tags:["Private"]}),i.prototype.publish("colorStroke",null,"html-color","Stroke Color",null,{tags:["Private"]}),i.prototype.publish("colorFill",null,"html-color","Fill Color",null,{tags:["Private"]}),i.prototype.publish("radius",null,"number","Radius",null,{tags:["Private"]}),i.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),i.prototype._origRadius=i.prototype.radius,i.prototype.radius=function(t){var e=i.prototype._origRadius.apply(this,arguments);return arguments.length?(this.width(t),this.height(t),e):Math.max(this.width(),this.height())/2},i.prototype.intersection=function(t,i){switch(this.shape()){case"circle":return this.intersectCircle(t,i)}return e.prototype.intersection.apply(this,arguments)},i.prototype.update=function(e,i){var n=i.selectAll("rect,circle,ellipse").data([this.shape()],function(t){return t}),o=this;n.enter().append("square"===this.shape()?"rect":this.shape()).attr("class","common_Shape").each(function(e){var i=t.select(this);o._tooltipElement=i.append("title")}),n.style("fill",this.colorFill()).style("stroke",this.colorStroke()).each(function(e){var i=t.select(this);switch(o._tooltipElement.text(o.tooltip()),o.shape()){case"circle":var n=o.radius();i.attr("r",n);break;case"square":var r=Math.max(o.width(),o.height());i.attr("x",-r/2).attr("y",-r/2).attr("width",r).attr("height",r);break;case"rect":i.attr("x",-o.width()/2).attr("y",-o.height()/2).attr("width",o.width()).attr("height",o.height());break;case"ellipse":i.attr("rx",o.width()/2).attr("ry",o.height()/2)}}),n.exit().remove()},i}),define("css!src/common/Icon",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Icon",["./SVGWidget","./Shape","./FAChar","css!./Icon"],e):t.common_Icon=e(t.common_SVGWidget,t.common_Shape,t.common_FAChar)}(this,function(t,e,i){function n(){t.call(this),this._shapeWidget=new e,this._faChar=new i}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._class+=" common_Icon",n.prototype.publish("shape","circle","set","Shape Type",["circle","square"],{tags:["Private"]}),n.prototype.publishProxy("faChar","_faChar","char"),n.prototype.publish("imageUrl",null,"string","Image URL",null,{optional:!0}),n.prototype.publishProxy("image_colorFill","_faChar","text_colorFill"),n.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),n.prototype.publish("diameter",24,"number","Diameter",null,{tags:["Private"]}),n.prototype.publish("paddingPercent",45,"number","Padding Percent",null,{tags:["Private"]}),n.prototype.publishProxy("shape_colorFill","_shapeWidget","colorFill"),n.prototype.publishProxy("shape_colorStroke","_shapeWidget","colorStroke"),n.prototype.intersection=function(t,e){return this._shapeWidget.intersection(t,e)},n.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments),this._defs=i.append("defs"),this._defs.append("clipPath").attr("id","clip_"+this.id()+"_circle").append("circle").attr("x",0).attr("y",0),this._defs.append("clipPath").attr("id","clip_"+this.id()+"_square").append("rect"),this._root=i.append("g"),this._shapeWidget.target(this._root.node()).render(),this._faChar.target(i.node()).render(),this._tooltipElement=i.append("title");var n=this;i.on("click",function(t){n.click(t)})},n.prototype.click=function(t){console.log("Clicked the icon")},n.prototype.update=function(e,i){
t.prototype.update.apply(this,arguments);var n=this.diameter(),o=n/2;this._defs.select("circle").attr("r",o),this._defs.select("rect").attr("x",-o).attr("y",-o).attr("width",n).attr("height",n),this._faChar.fontSize(n*(100-this.paddingPercent())/100).render(),this._shapeWidget.shape(this.shape()).width(n).height(n).render();var r=this._root.selectAll("image").data(this.imageUrl()?[this.imageUrl()]:[],function(t){return t});r.enter().append("image").attr("xlink:href",this.imageUrl()),r.attr("clip-path","url(#clip_"+this.id()+"_"+this.shape()+")").attr("x",-o).attr("y",-o).attr("width",n).attr("height",n),r.exit().remove(),this._tooltipElement.text(this.tooltip())},n.prototype.exit=function(e,i){t.prototype.exit.apply(this,arguments),this._shapeWidget.target(null),this._faChar.target(null)},n}),function(t,e){"function"==typeof define&&define.amd?define("src/common/IList",[],e):t.common_IList=e()}(this,function(){function t(){}return t.prototype.click=function(t){console.log("Click:  "+t)},t}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Image",["./HTMLWidget"],e):t.common_Image=e(t.common_HTMLWidget)}(this,function(t){function e(){t.call(this),this._drawStartPos="center"}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._class+=" common_Image",e.prototype.publish("source",null,"string","Image Source",null,{tags:["Basic"]}),e.prototype.publish("sizing","actual","set","Controls sizing mode",["actual","fit","custom"],{tags:["Basic"]}),e.prototype.publish("customWidth","50%","string","Applies this width to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"],disable:function(t){return"custom"!==t.sizing()}}),e.prototype.publish("customHeight","20%","string","Applies this height to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"],disable:function(t){return"custom"!==t.sizing()}}),e.prototype.publish("lockAspectRatio",!0,"boolean","Locks the aspect ratio when scaling/stretching",null,{tags:["Basic"],disable:function(t){return"fit"!==t.sizing()}}),e.prototype.publish("alignment","center","set","Image Alignment",["center","origin"],{tags:["Basic"]}),e.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments)},e.prototype.update=function(e,i){this._drawStartPos=this.alignment(),t.prototype.update.apply(this,arguments);var n=this,o=i.selectAll("img").data(this.source()?[this.source()]:[],function(t){return t});o.enter().append("img").attr("src",this.source()).on("load",function(t){o.style(n.calcSize())}),o.style(this.calcSize()),o.exit().remove()},e.prototype.calcSize=function(){var t={width:"auto",height:"auto"};switch(this.sizing()){case"fit":if(this.lockAspectRatio()){var e=this.element().select("img");e.style({width:"auto",height:"auto"});var i=e.node().getBoundingClientRect(),n=i.width/this.width(),o=i.height/this.height();n>o?(t.width=this.width()+"px",t.height=i.height/n+"px"):(t.width=i.width/o+"px",t.height=this.height()+"px")}else t.width=this.width()+"px",t.height=this.height()+"px";break;case"custom":t.width=this.customWidth(),t.height=this.customHeight()}return t},e.prototype.exit=function(e,i){t.prototype.exit.apply(this,arguments)},e}),function(t,e){"function"==typeof define&&define.amd?define("src/common/IMenu",[],e):t.common_IMenu=e()}(this,function(){function t(){}return t.prototype.click=function(t){console.log("Click:  "+t)},t.prototype.preShowMenu=function(){console.log("preShowMenu")},t.prototype.postHideMenu=function(t){console.log("postHideMenu")},t}),define("css!src/common/TextBox",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/TextBox",["./SVGWidget","./Shape","./Text","css!./TextBox"],e):t.common_TextBox=e(t.common_SVGWidget,t.common_Shape,t.common_Text)}(this,function(t,e,i){function n(){t.call(this),this._shape=(new e).shape("rect"),this._text=new i}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._class+=" common_TextBox",n.prototype.publishProxy("text","_text"),n.prototype.publishProxy("shape_colorStroke","_shape","colorStroke"),n.prototype.publishProxy("shape_colorFill","_shape","colorFill"),n.prototype.publishProxy("text_colorFill","_text","colorFill"),n.prototype.publish("paddingLeft",4,"number","Padding:  Left",null,{tags:["Private"]}),n.prototype.publish("paddingRight",4,"number","Padding:  Right",null,{tags:["Private"]}),n.prototype.publish("paddingTop",4,"number","Padding:  Top",null,{tags:["Private"]}),n.prototype.publish("paddingBottom",4,"number","Padding:  Bottom",null,{tags:["Private"]}),n.prototype.publishProxy("anchor","_text"),n.prototype.publish("fixedSize",null),n.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),n.prototype.padding=function(t){return this.paddingLeft(t),this.paddingRight(t),this.paddingTop(t),this.paddingBottom(t),this},n.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments),this._tooltipElement=i.append("title"),this._shape.target(e).render(),this._text.target(e).render()},n.prototype.update=function(e,i){t.prototype.update.apply(this,arguments),this._tooltipElement.text(this.tooltip()),this._text.render();var n=this._text.getBBox(!0),o={width:this.fixedSize()?this.fixedSize().width:n.width+this.paddingLeft()+this.paddingRight(),height:this.fixedSize()?this.fixedSize().height:n.height+this.paddingTop()+this.paddingBottom()};if(this._shape.width(o.width).height(o.height).render(),this.fixedSize())switch(this.anchor()){case"start":this._text.x(-this.fixedSize().width/2+n.width/2+(this.paddingLeft()+this.paddingRight())/2).render();break;case"end":this._text.x(this.fixedSize().width/2-n.width/2-(this.paddingLeft()+this.paddingRight())/2).render()}},n.prototype.exit=function(e,i){this._shape.target(null),this._text.target(null),t.prototype.exit.apply(this,arguments)},n}),define("css!src/common/List",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/List",["d3","../common/SVGWidget","./IList","../common/TextBox","css!./List"],e):t.common_List=e(t.d3,t.common_SVGWidget,t.common_IList,t.common_TextBox)}(this,function(t,e,i,n){function o(t){e.call(this),i.call(this),this._listWidgets={}}return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype._class+=" common_List",o.prototype["implements"](i.prototype),o.prototype.publish("anchor","start","set","Anchor Position",["","start","middle","end"],{tags:["Private"]}),o.prototype.update=function(t,i){e.prototype.update.apply(this,arguments);var o=this,r=i.selectAll(".line").data(this.data(),function(t){return t});r.enter().append("g").attr("class","line").each(function(t){var e=(new n).target(this).paddingTop(0).paddingBottom(0).paddingLeft(8).paddingRight(8).text(t).render();e.element().on("click",function(t){o.click(t.text())}),o._listWidgets[t]=e});var a=0,s=0,c=0;for(var f in this._listWidgets)if(this._listWidgets.hasOwnProperty(f)){var d=this._listWidgets[f].getBBox();a+=d.height,s<d.width&&(s=d.width),++c}var h=-a/2;r.each(function(t){var e=o._listWidgets[t],i=e.getBBox();e.pos({x:0,y:h+i.height/2}).anchor(o.anchor()).fixedSize({width:s,height:i.height}).render(),h+=i.height}),r.exit().remove().each(function(t){o._listWidgets[t].target(null),delete o._listWidgets[t]})},o.prototype.exit=function(t,i){for(var n in this._listWidgets)this._listWidgets[n].target(null);e.prototype.exit.apply(this,arguments)},o}),define("css!src/common/Menu",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Menu",["d3","./SVGWidget","./IMenu","./Icon","./List","css!./Menu"],e):t.common_Menu=e(t.d3,t.common_SVGWidget,t.common_IMenu,t.common_Icon,t.common_List)}(this,function(t,e,i,n,o){function r(){e.call(this),i.call(this),this._icon=(new n).shape("square").diameter(14),this._list=new o;var r=this;this._list.click=function(e){t.event.stopPropagation(),r.hideMenu(),r.click(e)},this._open=!1}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype._class+=" common_Menu",r.prototype["implements"](i.prototype),r.prototype.publishProxy("faChar","_icon",null,""),r.prototype.publishProxy("paddingPercent","_icon",null,10),r.prototype.toggleMenu=function(){this._open?this.hideMenu():this.showMenu()},r.prototype.showMenu=function(){this.preShowMenu(),this._open=!0,this._list.data(this.data()).render();var e=this._icon.getBBox(!0),i=this._list.getBBox(!0),n={x:e.width/2-i.width/2,y:e.height/2+i.height/2};this._list.move(n);var o=this;t.select("body").on("click."+this._id,function(){console.log("click:  body - "+o._id),o._open&&o.hideMenu()})},r.prototype.hideMenu=function(){t.select("body").on("click."+this._id,null),this._open=!1,this._list.data([]).render(),this.postHideMenu()},r.prototype.enter=function(i,n){e.prototype.enter.apply(this,arguments),this._icon.target(i).render(),this._list.target(i).render();var o=this;this._icon.element().on("click",function(e){t.event.stopPropagation(),o.toggleMenu()})},r.prototype.update=function(t,i){e.prototype.update.apply(this,arguments),i.classed("disabled",0===this.data().length),this._icon.faChar(this.faChar()).paddingPercent(this.paddingPercent()).render()},r.prototype.exit=function(t,i){this._icon.target(null),this._list.target(null),e.prototype.exit.apply(this,arguments)},r});var colorbrewer={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};define("colorbrewer",function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Palette",["d3","colorbrewer"],e):t.common_Palette=e(t.d3)}(this,function(t){function e(t,e){if(!t)return i();var n=c[t];return n||(n=i(t,e),c[t]=n),n}function i(n,o){function f(t){return d(t)}if(!n)return["default"].concat(r.concat(a).concat(s));var d=null;if(o)d=t.scale.ordinal().range(o);else{if(r.indexOf(n)>=0)d=new t.scale[n];else if(s.indexOf(n)>=0){var h=[];switch(n){case"hpcc10":var l=i("default").colors();h=l.filter(function(t,e){return e%2?!0:!1});break;case"hpcc20":h=i("category10").colors().concat(i("hpcc10").colors())}d=t.scale.ordinal().range(h)}else if(a.indexOf(n)>0)for(var u=12;u>0;){if(colorbrewer[n][u]){d=t.scale.ordinal().range(colorbrewer[n][u]);break}--u}d||(d=t.scale.category20()),o=d.range()}return f.type=function(){return"ordinal"},f.id=function(t){return arguments.length?(n=t,f):n},f.colors=function(t){return arguments.length?(o=t,f):o},f.clone=function(t){return c[t]=i(t,this.colors()),c[t]},f.cloneNotExists=function(t){return c[t]?c[t]:this.clone(t)},f["switch"]=function(t,i){return n===t?this:arguments.length?e(t,i):e()},f}function n(t,e,i){if(!t)return o();var n=f[t];return n||(n=o(t,e,i),f[t]=n),n}function o(e,i,r){function s(t,e,i){return e===i?h.domain([e-1,i+1])(t):h.domain([e,i])(t)}if(!arguments.length){var c=["default"];for(var d in colorbrewer)-1===a.indexOf(d)&&c.push(d);return c}var h=null,l=i,u=function(e,i){i=i||32;var n=Math.ceil(i/(e.length-1)),o=[],r=null;return e.forEach(function(e){if(r)for(var i=t.scale.linear().domain([0,n]).range([r,e]).interpolate(t.interpolateLab),a=0;n>a;++a)o.push(i(a));r=e}),h=t.scale.quantize().domain([0,100]).range(o)};if(i)h=u(i,r);else{if(colorbrewer[e])for(var p=12;p>0;){if(colorbrewer[e][p]){h=u(colorbrewer[e][p]);break}--p}h||(h=u(colorbrewer.RdYlGn[11])),l=h.range()}return s.type=function(){return"rainbow"},s.id=function(t){return arguments.length?(e=t,s):e},s.colors=function(t){return arguments.length?(l=t,s):l},s.clone=function(t){return f[t]=o(t,this.color()),f[t]},s.cloneNotExists=function(t){return f[t]?f[t]:this.clone(t)},s["switch"]=function(t,i){return e===t?this:arguments.length?n(t,i):n()},s}var r=["category10","category20","category20b","category20c"],a=["Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3"],s=["hpcc10","hpcc20"],c={},f={},d=function(e,n,r,a,s){t.select(e).selectAll(".palette").data(i(),function(t){return t}).enter().append("span").attr("class","palette").attr("title",function(t){return t}).on("click",function(e){console.log(t.values(e.value).map(JSON.stringify).join("\n"))}).selectAll(".swatch").data(function(t){return i(t).colors()}).enter().append("span").attr("class","swatch").style("background-color",function(t){return t}),t.select(n).selectAll(".palette").data(o(),function(t){return t}).enter().append("span").attr("class","palette").attr("title",function(t){return t}).on("click",function(e){console.log(t.values(e.value).map(JSON.stringify).join("\n"))}).selectAll(".swatch2").data(function(t){return o(t).colors()}).enter().append("span").attr("class","swatch2").style("height","8px").style("background-color",function(t){return t});var c={id:a.join("_")+s,scale:o("custom",a,s)};t.select(r).selectAll(".palette").data([c],function(t){return t.id}).enter().append("span").attr("class","palette").attr("title",function(t){return"aaa"}).on("click",function(e){console.log(t.values(e.value).map(JSON.stringify).join("\n"))}).selectAll(".swatch2").data(function(t){for(var e=[],i=0;255>=i;++i)e.push(c.scale(i,0,255));return e}).enter().append("span").attr("class","swatch2").style("background-color",function(t){return t})};return colorbrewer.RdWhGr={3:["red","white","green"]},{ordinal:e,rainbow:n,test:d}}),define("css!src/common/Surface",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/Surface",["d3","./SVGWidget","./Icon","./Shape","./Text","./FAChar","./Menu","css!./Surface"],e):t.common_Surface=e(t.d3,t.common_SVGWidget,t.common_Icon,t.common_Shape,t.common_Text,t.common_FAChar,t.common_Menu)}(this,function(t,e,i,n,o,r,a){function s(){e.call(this),this._icon=(new i).faChar("").paddingPercent(50),this._container=(new n)["class"]("container").shape("rect"),this._titleRect=(new n)["class"]("title").shape("rect"),this._text=(new o)["class"]("title"),this._menu=(new a).paddingPercent(0);var t=this;
this._menu.preShowMenu=function(){t.content()&&t.content().hasOverlay()&&t.content().visible(!1)},this._menu.postHideMenu=function(){t.content()&&t.content().hasOverlay()&&t.content().visible(!0)},this._surfaceButtons=[]}return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype._class+=" common_Surface",s.prototype.publish("showTitle",!0,"boolean","Show Title",null,{tags:["Basic"]}),s.prototype.publish("title","","string","Title",null,{tags:["Basic"]}),s.prototype.publishProxy("titleFontSize","_text","fontSize"),s.prototype.publish("showIcon",!0,"boolean","Show Title",null,{tags:["Advanced"]}),s.prototype.publishProxy("icon_faChar","_icon","faChar"),s.prototype.publishProxy("icon_shape","_icon","shape"),s.prototype.publish("content",null,"widget","Content",null,{tags:["Private"]}),s.prototype.publish("buttonAnnotations",[],"array","Button Array",null,{tags:["Intermediate"]}),s.prototype.publish("buttonGutter",25,"number","Space Between Menu and Buttons",null,{tags:["Intermediate"]}),s.prototype.publish("showContent",!0,"boolean","Show Content",null,{tags:["Intermediate"]}),s.prototype.publish("menu",[],"array","Menu List Data",null,{tags:["Intermediate"]}),s.prototype.publish("menuPadding",2,"number","Menu Padding",null,{tags:["Advanced"]}),s.prototype._origMenuParam=s.prototype.menu,s.prototype.menu=function(t){return s.prototype._origMenuParam.apply(this,arguments),arguments.length?(this._menu.data(t),this):this._menu.data()},s.prototype._origShowContent=s.prototype.showContent,s.prototype.showContent=function(t){var e=s.prototype._origShowContent.apply(this,arguments);return arguments.length&&this.content()&&this.content().visible(this.showContent()),e},s.prototype.enter=function(i,n){e.prototype.enter.apply(this,arguments);var o=n.append("g").attr("class","frame"),r=o.node();this._clipRect=o.append("defs").append("clipPath").attr("id",this.id()+"_clip").append("rect").attr("x",0).attr("y",0).attr("width",this._size.width).attr("height",this._size.height),this._titleRect.target(r).render().display(this.showTitle()&&this.showIcon()),this._icon.target(r).render(),this._menu.target(i),this._text.target(r),this._container.target(r),this.buttonContainer=t.select(this._target).append("div").attr("class","svg-button-container")},s.prototype.update=function(i,n){e.prototype.update.apply(this,arguments);var o=this,r=this.width()-1,a=this.height()-1;this._icon.display(this.showTitle()&&this.showIcon()).shape(this.icon_shape()).render(),this._menu.render(),this._text.text(this.title()).display(this.showTitle()).render();var s=this.buttonContainer.selectAll(".surface-button").data(this.buttonAnnotations());s.enter().append("button").attr("class","surface-button").each(function(e,i){var n=o._surfaceButtons[i]=t.select(this).attr("class","surface-button "+(e["class"]?e["class"]:"")).attr("id",e.id).style("padding",e.padding).style("width",e.width).style("height",e.height).style("cursor","pointer").on("click",function(t){o.click(t)});"FontAwesome"===e.font?n.append("i").attr("class","fa").text(function(t){return e.label}):n.text(function(t){return e.label})}),s.exit().each(function(e,i){var n=t.select(this);delete o._surfaceButtons[i],n.remove()});var c=this.showTitle()?Math.max.apply(null,this._surfaceButtons.map(function(t){return t.node().offsetHeight})):0,f=this.showTitle()&&this.showIcon()?this._icon.getBBox(!0):{width:0,height:0},d=this._text.getBBox(!0),h=this._menu.getBBox(!0),l=Math.max(f.height,d.height,h.height,c),u=this.showTitle()?l:0,p=(-a+l)/2,b=this.showTitle()?Math.max(d.height,h.height,c):0,m=b>=u?0:(u-b)/2,y=m;this._titleRect.pos({x:y,y:p}).width(r-2*y).height(b).display(this.showTitle()).render(),this._icon.move({x:-r/2+f.width/2,y:p}),this._menu.move({x:r/2-h.width/2-this.menuPadding(),y:p}),this._text.move({x:(f.width/2-h.width/2)/2,y:p});var g=o._titleRect.node().getBoundingClientRect().left+(o._size.width-2*y)-o.buttonGutter()-this.buttonContainer.node().offsetWidth,_=o._titleRect.node().getBoundingClientRect().top+(b-this.buttonContainer.node().offsetHeight)/2;if(isNaN(g)||this.buttonContainer.style("left",g+"px"),isNaN(_)||this.buttonContainer.style("top",_+"px"),this.showTitle()?this._container.pos({x:y/2,y:u/2-m/2}).width(r-y).height(a-u+m).render():this._container.pos({x:0,y:0}).width(r).height(a).render(),this.showContent()){var x=y,v=u-m,w=n.selectAll(".content").data(this.content()?[this.content()]:[],function(t){return t._id});w.enter().append("g").attr("class","content").attr("clip-path","url(#"+this.id()+"_clip)").each(function(t){t.target(this)}),w.attr("transform","translate("+y/2+", "+(u/2-m/2)+")").each(function(t){var e={left:0,top:0,right:1,bottom:1};t.resize({width:r-x-(e.left+e.right),height:a-v-(e.top+e.bottom)})}),this.content()&&this._clipRect.attr("x",-(r-x)/2).attr("y",-(a-v)/2).attr("width",r-x).attr("height",a-v),w.exit().transition().each(function(t){t.target(null)}).remove()}this._menu.element()&&this._menu.element().node()&&this._menu.element().node().parentNode&&this._menu.element().node().parentNode.appendChild(this._menu.element().node())},s.prototype.exit=function(t,i){this._titleRect.target(null),this._icon.target(null),this._menu.target(null),this._text.target(null),this._container.target(null),this.content()&&this.content().target(null),e.prototype.exit.apply(this,arguments)},s.prototype.intersection=function(t,e){var i=[],n=this._icon.intersection(t,e,this._pos);n&&i.push({i:n,d:this.distance(n,e)});var o=this._titleRect.intersection(t,e);o&&i.push({i:o,d:this.distance(o,e)});var r=this._container.intersection(t,e);r&&i.push({i:r,d:this.distance(r,e)});var a=null;return i.forEach(function(t){(null===a||a.d>t.d)&&(a=t)}),a&&a.i?a.i:null},s.prototype.click=function(t,e){console.log("Clicked: "+t.id)},s}),define("css!src/common/ResizeSurface",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/ResizeSurface",["d3","./Surface","css!./ResizeSurface"],e):t.common_ResizeSurface=e(t.d3,t.common_Surface)}(this,function(t,e){function i(){e.call(this),this.handleWidth=8,this.handles=[{loc:"NW"},{loc:"N"},{loc:"NE"},{loc:"E"},{loc:"SE"},{loc:"S"},{loc:"SW"},{loc:"W"}];var i=this;this.dispatch=t.dispatch("sizestart","size","sizeend"),this.drag=t.behavior.drag().origin(function(t){return t}).on("dragstart",function(e){i.dispatch.sizestart(i,e.loc),i.allowResize()&&(t.event.sourceEvent.stopPropagation(),i._dragHandlePos={x:e.x,y:e.y},i._dragStartPos=i.pos(),i._dragStartSize=i.size(),i._prevPosSize={x:i._dragStartPos.x,y:i._dragStartPos.y,width:i._dragStartSize.width,height:i._dragStartSize.height},i._textPosSize=i._text.getBBox(!0),i._iconPosSize=i._icon.getBBox(!0),i.showContent(!1))}).on("drag",function(e){if(i.allowResize()){t.event.sourceEvent.stopPropagation();var n=t.event.x-i._dragHandlePos.x,o=t.event.y-i._dragHandlePos.y,r={x:0,y:0,w:0,h:0};switch(e.loc){case"NW":r.x=n/2,r.w=-n;case"N":r.y=o/2,r.h=-o;break;case"NE":r.y=o/2,r.h=-o;case"E":r.x=n/2,r.w=n;break;case"SE":r.x=n/2,r.w=n;case"S":r.y=o/2,r.h=o;break;case"SW":r.y=o/2,r.h=o;case"W":r.x=n/2,r.w=-n}var a={x:i._dragStartPos.x+r.x,y:i._dragStartPos.y+r.y,width:i._dragStartSize.width+r.w,height:i._dragStartSize.height+r.h};a.width<2*i._iconPosSize.width+i._textPosSize.width&&(a.x=i._prevPosSize.x,a.width=i._prevPosSize.width),a.height<i._textPosSize.height+48&&(a.y=i._prevPosSize.y,a.height=i._prevPosSize.height),i.pos({x:a.x,y:a.y},!1,!1).size({width:a.width,height:a.height}).render().getBBox(!0),i.dispatch.size(i,e.loc),i._prevPosSize=a}}).on("dragend",function(e){i.allowResize()&&(t.event.sourceEvent.stopPropagation(),i.showContent(!0).render(),i._container.getBBox(!0),i._titleRect.getBBox(!0),i.dispatch.sizeend(i,e.loc))})}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" common_ResizeSurface",i.prototype.publish("allowResize",!0,"boolean","Sets if surface can be resized",null,{tags:["Private","Shared"]}),i.prototype.move=function(t){var i=e.prototype.move.apply(this,arguments);return this.updateHandles(this._domNode,this._element),i},i.prototype.update=function(t,i){e.prototype.update.apply(this,arguments),this.updateHandles(t,i)},i.prototype.updateHandles=function(e,i){var n=this._parentElement.selectAll("rect").data(this.handles,function(t){return t.loc});n.enter().append("rect").attr("class",function(t){return"resize"+t.loc}).call(this.drag);var o=this._pos.x+this._container._pos.x-this._container.width()/2,r=this._pos.y+this._titleRect._pos.y-this._titleRect.height()/2,a=this._pos.x+this._container._pos.x+this._container.width()/2,s=this._pos.y+this._container._pos.y+this._container.height()/2,c=a-o,f=s-r,d=this;n.each(function(e){switch(e.loc){case"NW":e.x=o-d.handleWidth/2,e.y=r-d.handleWidth/2,e.width=d.handleWidth,e.height=d.handleWidth;break;case"N":e.x=o+d.handleWidth/2,e.y=r-d.handleWidth/2,e.width=c-d.handleWidth,e.height=d.handleWidth;break;case"NE":e.x=a-d.handleWidth/2,e.y=r-d.handleWidth/2,e.width=d.handleWidth,e.height=d.handleWidth;break;case"E":e.x=a-d.handleWidth/2,e.y=r+d.handleWidth/2,e.width=d.handleWidth,e.height=f-d.handleWidth;break;case"SE":e.x=a-d.handleWidth/2,e.y=s-d.handleWidth/2,e.width=d.handleWidth,e.height=d.handleWidth;break;case"S":e.x=o+d.handleWidth/2,e.y=s-d.handleWidth/2,e.width=c-d.handleWidth,e.height=d.handleWidth;break;case"SW":e.x=o-d.handleWidth/2,e.y=s-d.handleWidth/2,e.width=d.handleWidth,e.height=d.handleWidth;break;case"W":e.x=o-d.handleWidth/2,e.y=r+d.handleWidth/2,e.width=d.handleWidth,e.height=f-d.handleWidth}t.select(this).attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height)})},i}),define("css!src/common/SVGZoomWidget",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/common/SVGZoomWidget",["d3","../common/SVGWidget","../common/Icon","css!./SVGZoomWidget"],e):t.common_SVGZoomWidget=e(t.d3,t.common_SVGWidget,t.common_Icon)}(this,function(t,e,i){function n(t){e.call(this)}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" common_SVGZoomWidget",n.prototype.publish("zoomToolbar",!0,"boolean","Show Zoom Toolbar"),n.prototype.publish("zoomDuration",250,"number","Transition Duration"),n.prototype.zoomTo=function(t,e,i){t=t||this._zoom.translate(),e=e||this._zoom.scale(),i=void 0===i?this.zoomDuration():0,this._zoomElement.transition().duration(i).call(this._zoom.translate(t).scale(e).event)},n.prototype.zoomToFit=function(t){var e=this._renderElement.node().getBBox();if(e.width&&e.height){var i=e.x+e.width/2,n=e.y+e.height/2,o=e.width,r=e.height,a=this.width(),s=this.height(),c=1/Math.max(o/a,r/s),f=[a/2-c*i,s/2-c*n];this.zoomTo(f,c,t)}},n.prototype.enter=function(i,n){e.prototype.enter.apply(this,arguments),this._zoomElement=n.append("g"),this._zoomGrab=this._zoomElement.append("rect").attr("class","background"),this._zoomG=this._zoomElement.append("g"),this._renderElement=this._zoomG.append("g");var o=this;this._zoom=t.behavior.zoom().scaleExtent([.05,20]).on("zoom",function(){o._zoomG.attr("transform","translate("+t.event.translate+")scale("+t.event.scale+")")}),this._zoomElement.call(this._zoom)},n.prototype.update=function(t,n){e.prototype.update.apply(this,arguments),this._zoomGrab.attr("width",this.width()).attr("height",this.height());var o=this,r=n.selectAll(".toolbar").data(this.zoomToolbar()?["dummy"]:[]),a=24,s=14;r.enter().append("g").attr("class","toolbar").each(function(t){o._buttonToFit=(new i).target(this).faChar("").shape("square").diameter(a).paddingPercent(100*(1-s/a)).on("click",function(){o.zoomToFit()}),o._buttonPlus=(new i).target(this).faChar("").shape("square").diameter(a).paddingPercent(100*(1-s/a)).on("click",function(){o.zoomTo(null,1.2*o._zoom.scale())}),o._buttonMinus=(new i).target(this).faChar("").shape("square").diameter(a).paddingPercent(100*(1-s/a)).on("click",function(){o.zoomTo(null,o._zoom.scale()/1.2)}),o._buttonLast=o._buttonMinus}),this.zoomToolbar()&&(this._buttonToFit.x(this.width()-a/2-4).y(a/2+4).render(),this._buttonPlus.x(this.width()-a/2-4).y(this._buttonToFit.y()+4+a).render(),this._buttonMinus.x(this.width()-a/2-4).y(this._buttonPlus.y()+a).render()),r.exit().each(function(){o._buttonToFit.target(null).render(),delete o._buttonToFit}).remove()},n.prototype.exit=function(t,i){e.prototype.exit.apply(this,arguments)},n}),function(t,e){"function"==typeof define&&define.amd?define("src/common/WidgetArray",["./Widget"],e):t.common_WidgetArray=e(t.common_Widget)}(this,function(t){function e(){t.call(this)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._class+=" common_WidgetArray",e.prototype.publish("content",[],"widgetArray","Widget Array"),e.prototype.target=function(t){t||(this.content_reset(),this.exit())},e}),function(t){var e=document,i="appendChild",n="styleSheet",o=e.createElement("style");o.type="text/css",e.getElementsByTagName("head")[0][i](o),o[n]?o[n].cssText=t:o[i](e.createTextNode(t))}(".common_Text{fill:#000;font-size:12px}.common_FAChar .common_Text{font-size:14px}.common_Shape{fill:#1f77b4;stroke:#1f77b4}.common_Icon .common_FAChar .common_Text{fill:#fff}.common_TextBox .common_Shape{fill:#dcf1ff;stroke:#1f77b4}.common_List .common_TextBox .common_Shape{fill:#dcf1ff;stroke:#dcf1ff}.common_List .common_TextBox .common_Text{pointer-events:none}.common_List .common_TextBox .common_Shape:hover{fill:#fff;stroke:#fff}.common_Menu .common_FAChar{fill:#fff;cursor:pointer}.common_Menu.disabled .common_FAChar{visibility:hidden;cursor:inherit}.common_Menu .common_List .common_TextBox .common_Shape{fill:#1f77b4;stroke:#1f77b4}.common_Menu .common_List .common_TextBox .common_Text{fill:#fff}.common_Menu .common_List .common_TextBox .common_Shape:hover{fill:#ff7f0e;stroke:#ff7f0e}.common_Surface .container .common_Shape{fill:#f9fcff;stroke:#1f77b4;stroke-width:1px}.common_Surface .title{cursor:move}.common_Surface .title .common_Shape{fill:#1f77b4;stroke:#1f77b4;stroke-width:1px}.common_Surface .title text{fill:#fff;stroke:none}.svg-button-container{position:fixed}.svg-button-container .surface-button{position:relative;background:0 0;border:none;opacity:.8;color:#fff}.svg-button-container .surface-button:hover{opacity:1}.svg-button-container .surface-button:active{opacity:.5}.resizeN{cursor:ns-resize;opacity:0}.resizeE,.resizeNE{cursor:ne-resize;opacity:0}.resizeE{cursor:ew-resize}.resizeS,.resizeSE{cursor:se-resize;opacity:0}.resizeS{cursor:ns-resize}.resizeSW,.resizeW{cursor:sw-resize;opacity:0}.resizeW{cursor:ew-resize}.resizeNW{cursor:nw-resize;opacity:0}.common_SVGZoomWidget .common_Icon .common_Shape{fill:#fff;stroke:#a9a9a9;cursor:pointer}.common_SVGZoomWidget .common_Icon .common_FAChar .common_Text{fill:#a9a9a9;cursor:pointer}.common_SVGZoomWidget .background{fill:#fff}"),define("hpcc-viz-common",function(){});