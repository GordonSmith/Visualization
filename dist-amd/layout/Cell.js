!function(t,e){"function"==typeof define&&define.amd?define(["d3","./Surface","css!./Cell"],e):t.layout_Cell=e(t.d3,t.layout_Surface)}(this,function(t,e){function i(){e.call(this),this._dragHandles=["nw","n","ne","e","se","s","sw","w"],this._indicateTheseIds=[]}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" layout_Cell",i.prototype.publish("gridRow",0,"number","Grid Row Position",null,{tags:["Private"]}),i.prototype.publish("gridCol",0,"number","Grid Column Position",null,{tags:["Private"]}),i.prototype.publish("gridRowSpan",1,"number","Grid Row Span",null,{tags:["Private"]}),i.prototype.publish("gridColSpan",1,"number","Grid Column Span",null,{tags:["Private"]}),i.prototype.publish("handleSize",6,"number","Grid Row Position",null,{tags:["Private"]}),i.prototype.publish("indicatorGlowColor","#EEEE11","html-color","Glow color of update-indicator",null,{tags:["Basic"]}),i.prototype.publish("indicatorBorderColor","#F48A00","html-color","Border color of update-indicator",null,{tags:["Basic"]}),i.prototype.publish("indicatorOpacity",.8,"number","Opacity of update-indicator",null,{tags:["Basic"]}),i.prototype.indicateTheseIds=function(t){return arguments.length?(this._indicateTheseIds=t,this):this._indicateTheseIds},i.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments);var o=this;i.classed("layout_Surface",!0).on("mouseenter",function(t){o.onMouseEnter()}).on("mouseleave",function(t){o.onMouseLeave()})},i.prototype.update=function(i,o){e.prototype.update.apply(this,arguments);var s=o.selectAll("#"+this.id()+" > .dragHandle").data(this._dragHandles,function(t){return t});s.enter().append("div").attr("class",function(t){return"dragHandle dragHandle_"+t}).style({padding:"0px",margin:"0px",position:"absolute"}).each(function(e){switch(e){case"nw":t.select(this).style({width:"6px",height:"6px",left:"0px",top:"0px","z-index":1e3});break;case"ne":t.select(this).style({width:"6px",height:"6px",left:"calc(100% - 6px)",top:"0px","z-index":1e3});break;case"se":t.select(this).style({width:"6px",height:"6px",left:"calc(100% - 6px)",top:"calc(100% - 6px)","z-index":1e3});break;case"sw":t.select(this).style({width:"6px",height:"6px",left:"0px",top:"calc(100% - 6px)","z-index":1e3});break;case"n":t.select(this).style({width:"100%",height:"6px",left:"0px",top:"0px","z-index":900});break;case"e":t.select(this).style({width:"6px",height:"100%",left:"calc(100% - 6px)",top:"0px","z-index":900});break;case"s":t.select(this).style({width:"100%",height:"6px",left:"0px",top:"calc(100% - 6px)","z-index":900});break;case"w":t.select(this).style({width:"6px",height:"100%",left:"0px",top:"0px","z-index":900})}}),s.exit().remove()},i.prototype.onMouseEnter=function(e){for(var i=this.indicateTheseIds(),o=this.indicatorOpacity(),s=this.indicatorBorderColor(),p=this.indicatorGlowColor(),a=0;a<i.length;a++){var n=t.select("#"+i[a]);if(n.datum()){var r=n.datum();n.append("div").attr("class","update-indicator").style({width:r.width()+"px",height:r.height()+"px",opacity:o,"border-color":s,"-webkit-box-shadow":"inset 0px 0px 30px 0px "+p,"-moz-box-shadow":"inset 0px 0px 30px 0px "+p,"box-shadow":"inset 0px 0px 30px 0px "+p})}}},i.prototype.onMouseLeave=function(){for(var e=this.indicateTheseIds(),i=0;i<e.length;i++)t.selectAll("#"+e[i]+" > div.update-indicator").remove()},i});