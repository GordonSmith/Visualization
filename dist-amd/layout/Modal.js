!function(t,e){"function"==typeof define&&define.amd?define(["d3","../common/HTMLWidget","../other/Html","css!./Modal"],e):t.layout_Modal=e(t.d3,t.common_HTMLWidget,t.other_Html)}(this,function(t,e,i){function o(){e.call(this),this._tag="div",this._html=(new i).overflowX("visible").overflowY("visible")}return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype._class+=" layout_Modal",o.prototype.publishProxy("html","_html"),o.prototype.publish("title",null,"string","title"),o.prototype.publish("titleFontSize","18px","string","titleFontSize"),o.prototype.publish("titleFontColor","#ffffff","html-color","titleFontColor"),o.prototype.publish("relativeTargetId",null,"string","relativeTargetId"),o.prototype.publish("headerPadding","15px","string","headerPadding"),o.prototype.publish("bodyPadding","15px","string","bodyPadding"),o.prototype.publish("show",!0,"boolean","show"),o.prototype.publish("showFade",!0,"boolean","showFade"),o.prototype.publish("enableClickFadeToClose",!0,"boolean","enableClickFadeToClose"),o.prototype.publish("minWidth","400px","string","minWidth"),o.prototype.publish("minHeight","400px","string","minHeight"),o.prototype.publish("maxWidth","800px","string","maxWidth"),o.prototype.publish("maxHeight","800px","string","maxHeight"),o.prototype.closeModal=function(){this.exit()},o.prototype.getRelativeTarget=function(){var t;return this.relativeTargetId()&&(t=document.getElementById(this.relativeTargetId()))?t:!t&&(t=this.locateAncestor("layout_Grid"),t&&t.element)?t.element().node():document.body},o.prototype.setModalSizeLimits=function(){(this.minHeight()||this.minWidth())&&this._modal.style({"min-height":this.minHeight(),"min-width":this.minWidth(),"max-height":this.maxHeight(),"max-width":this.maxWidth()})},o.prototype.setFadePosition=function(t){var e={top:t.top+"px",left:t.left+"px",width:t.width+"px",height:t.height+"px"};this._fade.style(e)},o.prototype.setModalPosition=function(t){var e=this._modal.node().getBoundingClientRect(),i={top:t.top+t.height/2-e.height/2+"px",left:t.left+t.width/2-e.width/2+"px",width:e.width+"px",height:e.height+"px"};(this.minHeight()||this.minWidth())&&(i["min-height"]=this.minHeight(),i["min-width"]=this.minWidth()),this._modal.style(i)},o.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments);var o=this;this._fade=i.append("div").classed("layout_Modal-fade",!0).classed("layout_Modal-fadeClickable",this.enableClickFadeToClose()).classed("layout_Modal-fade-hidden",!this.showFade()),this._modal=i.append("div").classed("layout_Modal-content",!0),this._modalHeader=this._modal.append("div").classed("layout_Modal-header",!0).style("padding",this.headerPadding()).style("color",this.titleFontColor()).style("font-size",this.titleFontSize()),this._modalBody=this._modal.append("div").classed("layout_Modal-body",!0).style("padding",this.bodyPadding()),this._modalHeaderTitle=this._modalHeader.append("div").classed("layout_Modal-title",!0).text(this.title()),this._modalHeaderAnnotations=this._modalHeader.append("div").classed("layout_Modal-annotations",!0),this._modalHeaderAnnotations.style({right:this._modalHeader.style("padding-right"),top:this._modalHeader.style("padding-top")}),this._modalHeaderCloseButton=this._modalHeaderAnnotations.append("div").classed("layout_Modal-closeButton",!0).html('<i class="fa fa-close"></i>'),this._modalHeaderCloseButton.on("click",function(){o.closeModal()}),this._fade.on("click",function(){o.enableClickFadeToClose()&&o.closeModal()}),this._html.target(this._modalBody.node()),this.setModalSizeLimits()},o.prototype.update=function(t,i){e.prototype.update.apply(this,arguments),this._fade.classed("layout_Modal-fade-hidden",!this.showFade()),this._relativeTarget=this.getRelativeTarget(),this.setModalSizeLimits();var o=this;this._html.html(this.html()).render(function(){var t=o._relativeTarget.getBoundingClientRect();o.setFadePosition(t),o.setModalPosition(t)})},o});