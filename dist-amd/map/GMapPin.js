!function(t,o){"function"==typeof define&&define.amd?define(["d3","./GMapLayered","./Pins"],o):t.map_GMapPin=o(t.d3,t.map_GMapLayered,t.map_Pins)}(this,function(t,o,n){function i(t){o.call(this);var i=this;this._pins=(new n).columns(["lat","long","ext"]).on("click",function(t,o,n){i.click(t.ext.origRow,"",n)})}return i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype._class+=" map_GMapPin",i.prototype.publishProxy("pinColor","_pins","fillColor"),i.prototype.publish("latitudeColumn",null,"set","Latitude",function(){return this.columns()},{optional:!0}),i.prototype.publish("longtitudeColumn",null,"set","Longtitude",function(){return this.columns()},{optional:!0}),i.prototype.publish("colorColumn",null,"set","Color",function(){return this.columns()},{optional:!0}),i.prototype.publish("tooltipColumn",null,"set","Tooltip",function(){return this.columns()},{optional:!0}),i.prototype.pinsData=function(){var t=this.columns();return this._view=this._db.rollupView([this.latitudeColumn(),this.longtitudeColumn()]),this._view.entries().map(function(o){var n=o.values[0].values[0];return[o.key,o.values[0].key,{fillColor:n[t.indexOf(this.colorColumn())],tooltip:n[t.indexOf(this.tooltipColumn())],origRow:n}]},this)},i.prototype.enter=function(t,n){o.prototype.enter.apply(this,arguments),this.layers([this._pins])},i.prototype.update=function(t,n){o.prototype.update.apply(this,arguments),this._pins.data(this.pinsData())},i.prototype.exit=function(t,n){o.prototype.exit.apply(this,arguments)},i.prototype.click=function(t,o,n){console.log("GMapPin-click:  ",t,o,n)},i});