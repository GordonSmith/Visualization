!function(t,e){"function"==typeof define&&define.amd?define(["../form/Button","../layout/Popup","../layout/Surface"],e):t.marshaller_FlyoutButton=e(t.form_Button,t.layout_Popup,t.layout_Surface)}(this,function(t,e,p){function o(){t.call(this),this.value("^");var o=this;this._popupSurface=(new p).surfaceBackgroundColor("rgb(234, 249, 255)").buttonAnnotations([{id:"",label:"ÔÄç",width:20,padding:"0px 5px","class":"close",font:"FontAwesome"}]).on("click",function(t){"close"===t["class"]&&o._popup.visible(!1).popupState(!1).render()}),this._popup=(new e).size({width:400,height:400}).position("absolute").widget(this._popupSurface)}return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype._class+=" marshaller_FlyoutButton",o.prototype.publishProxy("title","_popupSurface"),o.prototype.publishProxy("widget","_popupSurface"),o.prototype.click=function(t){var e=this;this._popup.visible(!0).popupState(!0).render(function(t){var p=e._popupSurface.widget().getBBox();e._popupSurface.resize({width:p.width,height:p.height+e._popupSurface.calcHeight(e._popupSurface.element().select(".surfaceTitle"))+18}),e._popup.render()})},o.prototype.enter=function(e,p){t.prototype.enter.apply(this,arguments);for(var o=this;o&&-1===["marshaller_HTML","marshaller_Graph"].indexOf(o.classID());)o=o.locateParentWidget();o&&(this._popupParentWidget=o,this._popup.target(o.node()))},o.prototype.render=function(e){var p=this;t.prototype.render.call(p,function(t){var o=p._popupParentWidget.getBBox(),r=t.getBBox();p._popup.left(r.x-o.x+r.width-p._popup.width()).top(r.y-o.y+r.height).visible(!1).popupState(!1).render(),e&&e(t)})},o});