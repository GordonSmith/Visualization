!function(t,e){"function"==typeof define&&define.amd?define(["d3","../common/SVGWidget","../common/TextBox","../common/Surface","../common/ResizeSurface","../chart/MultiChartSurface","../common/Palette","../graph/Graph","../graph/Vertex","../graph/Edge","./HipieDDLMixin"],e):t.marshaller_Graph=e(t.d3,t.common_SVGWidget,t.common_TextBox,t.common_Surface,t.common_ResizeSurface,t.chart_MultiChartSurface,t.common_Palette,t.graph_Graph,t.graph_Vertex,t.graph_Edge,t.marshaller_HipieDDLMixin)}(this,function(t,e,r,i,o,a,n,s,h,c,p){function d(){s.call(this),p.call(this),this._design_mode=!1,this._dashboards=[],this.graphAttributes=["snapToGrid","showEdges"],this.widgetAttributes=["layout","chartType","palette","title","columns","data"],this.layout("Hierarchy"),this.applyScaleOnLayout(!0),this.content([])}return d.prototype=Object.create(s.prototype),d.prototype.constructor=d,d.prototype.mixin(p),d.prototype._class+=" marshaller_Graph",d.prototype.publish("content",[],"widgetArray","widgets",null,{tags:["Basic"]}),d.prototype.populateContent=function(){var t=[],e=[];for(var r in this._ddlDashboards)this._ddlDashboards[r].visualizations.forEach(function(e){if(e.widget){var r=null;if(e.widget instanceof o)r=e.widget.size({width:210,height:210});else{var i=280,a=210;r=(new o).showTitle(!0).size({width:i,height:a}).content(e.widget)}r&&(e.newWidgetSurface=r),t.push(r)}e.getInputVisualizations().forEach(function(){},this)},this);for(r in this._ddlDashboards)this._ddlDashboards[r].visualizations.forEach(function(t){t.getInputVisualizations().forEach(function(r){e.push((new c).sourceVertex(r.newWidgetSurface).targetVertex(t.newWidgetSurface).targetMarker("arrowHead"))},this)},this);this.content(t),this.data({vertices:t,edges:e})},d.prototype.enter=function(t,e){s.prototype.enter.apply(this,arguments),e.classed("graph_Graph",!0)},d.prototype.render=function(t){return this._marshallerRender(s.prototype,t),this},d.prototype.commsError=function(t,e){alert("Comms Error:\n"+t+"\n"+e)},d});