(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/SVGWidget","../common/TextBox","../common/Surface","../common/ResizeSurface","../chart/MultiChartSurface","../common/Palette","../graph/Graph","../graph/Vertex","../graph/Edge","./HipieDDLMixin"],t):e.marshaller_Graph=t(e.d3,e.common_SVGWidget,e.common_TextBox,e.common_Surface,e.common_ResizeSurface,e.chart_MultiChartSurface,e.common_Palette,e.graph_Graph,e.graph_Vertex,e.graph_Edge,e.marshaller_HipieDDLMixin)})(this,function(e,t,n,r,i,s,o,u,a,f,l){function c(){u.call(this),l.call(this),this._design_mode=!1,this._dashboards=[],this.graphAttributes=["snapToGrid","showEdges"],this.widgetAttributes=["layout","chartType","palette","title","columns","data"],this.layout("Hierarchy"),this.applyScaleOnLayout(!0),this.content([])}return c.prototype=Object.create(u.prototype),c.prototype.constructor=c,c.prototype.mixin(l),c.prototype._class+=" marshaller_Graph",c.prototype.publish("content",[],"widgetArray","widgets",null,{tags:["Basic"]}),c.prototype.populateContent=function(){var e=[],t=[];for(var n in this._ddlDashboards)this._ddlDashboards[n].visualizations.forEach(function(t){if(t.widget){var n=null;if(t.widget instanceof i)n=t.widget.size({width:210,height:210});else{var r=280,s=210;n=(new i).showTitle(!0).size({width:r,height:s}).content(t.widget)}n&&(t.newWidgetSurface=n),e.push(n)}t.getInputVisualizations().forEach(function(){},this)},this);for(n in this._ddlDashboards)this._ddlDashboards[n].visualizations.forEach(function(e){e.getInputVisualizations().forEach(function(n){t.push((new f).sourceVertex(n.newWidgetSurface).targetVertex(e.newWidgetSurface).targetMarker("arrowHead"))},this)},this);this.content(e),this.data({vertices:e,edges:t})},c.prototype.enter=function(e,t){u.prototype.enter.apply(this,arguments),t.classed("graph_Graph",!0)},c.prototype.render=function(e){return this._marshallerRender(u.prototype,e),this},c.prototype.commsError=function(e,t){alert("Comms Error:\n"+e+"\n"+t)},c});