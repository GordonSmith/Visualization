(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","css!./Select"],t):e.other_Select=t(e.d3,e.common_HTMLWidget)})(this,function(e,t){function n(e){t.call(this)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._class+=" other_Select",n.prototype.publish("label",null,"string","Label for select"),n.prototype.publish("valueColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0}),n.prototype.publish("textColumn",null,"set","Select value(s)",function(){return this.columns()},{optional:!0}),n.prototype.publish("optional",!0,"boolean","Optional Select"),n.prototype.publish("sort",null,"set","Sort contents",["","ascending","descending"],{optional:!0}),n.prototype.publish("multiple",!1,"boolean","Multiple selection"),n.prototype.publish("selectSize",5,"number","Size of multiselect box",null,{disable:function(e){return!e.multiple()}}),n.prototype.selectData=function(){var e=this._db.rollupView([this.textColumn(),this.valueColumn()]),t=[];t=t.concat(e.entries().map(function(e){return{text:e.key,value:e.values.length?e.values[0].key:"",origRow:e.values.length&&e.values[0].values.length?e.values[0].values[0]:[]}},this));if(this.sort_exists()){var n=this.sort()==="descending";t.sort(function(e,t){return e.text<t.text?n?1:-1:e.text>t.text?n?-1:1:0})}return this.optional()&&t.unshift({value:"",text:""}),t},n.prototype.enter=function(n,r){t.prototype.enter.apply(this,arguments),this._span=r.append("span"),this._label=this._span.append("label").attr("for",this.id()+"_select");var i=this;this._select=this._span.append("select").attr("id",this.id()+"_select").on("change",function(t){var n=[],r=i._select.node().options;for(var s=0;s<r.length;++s){var o=r[s];o.selected&&n.push(e.select(o).datum().origRow)}n.length?i.click(i.rowToObj(n[0]),i.valueColumn(),!0):i.click([],i.valueColumn(),!1)})},n.prototype.update=function(e,n){t.prototype.update.apply(this,arguments),this._label.text(this.label()),this._select.attr("multiple",this.multiple()?this.multiple():null).attr("size",this.multiple()&&this.selectSize()?this.selectSize():null);var r=this._select.selectAll(".dataRow").data(this.selectData());r.enter().append("option").attr("class","dataRow"),r.attr("value",function(e){return e.value}).text(function(e){return e.text}),r.exit().remove(),r.order()},n.prototype.exit=function(e,n){this._span.remove(),t.prototype.exit.apply(this,arguments)},n.prototype.click=function(e,t,n){console.log("Click:  "+JSON.stringify(e)+", "+t+", "+n)},n});