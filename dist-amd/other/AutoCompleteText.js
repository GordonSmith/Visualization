(function(e,t){typeof define=="function"&&define.amd?define(["../common/HTMLWidget","autoComplete","css!./AutoCompleteText","css!autoComplete"],t):e.other_AutoCompleteText=t(e.common_HTMLWidget,e.autoComplete)})(this,function(e,t){function n(){e.call(this),this._tag="div"}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" other_AutoCompleteText",n.prototype.publish("label","Label: ","string","Label for AutoCompleteText"),n.prototype.publish("placeholder","Search...","string","Placeholder for AutoCompleteText"),n.prototype.publish("valueColumn",null,"set","Select column for autocomplete",function(){return this.columns()},{optional:!0}),n.prototype.publish("minCharsText",1,"number","Size of multiAutoCompleteText box"),n.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments),this._span=n.append("span"),this._label=this._span.append("label").attr("for",this.id()+"_input"),this._input=this._span.append("input").attr("id",this.id()+"_input").attr("name",this.id()+"_input_name").attr("type","text").attr("placeholder",this.placeholder())},n.prototype.update=function(n,r){e.prototype.update.apply(this,arguments),this._label.text(this.label());if(this._prevMinCharsText!==this.minCharsText()){this._prevMinCharsText=this.minCharsText(),this._autoComplete&&this._autoComplete.destroy();var i=this;this._autoComplete=new t({selector:"#"+this.id()+"_input",minChars:this.minCharsText(),delay:150,offsetLeft:0,offsetTop:1,source:function(e,t){var n=i._db.fieldByLabel(i.valueColumn());if(n){e=e.toLowerCase();var r=i.data().filter(function(t){return t[n.idx].toLowerCase().indexOf(e)>=0}).map(function(e){return{value:e[n.idx],origRow:e}});t(r)}},renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e.value+'" data-row="'+e.origRow+'">'+e.value.replace(n,"<b>$1</b>")+"</div>"},onSelect:function(e,t,n){i.click(n.getAttribute("data-row"),i.valueColumn(),!0)}})}},n.prototype.exit=function(t,n){this._autoComplete&&this._autoComplete.destroy(),this._span.remove(),e.prototype.exit.apply(this,arguments)},n.prototype.click=function(e,t,n){console.log("Click:  "+JSON.stringify(e)+", "+t+", "+n)},n});